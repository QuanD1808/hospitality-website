{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/pharmacyPage/PatientList.tsx"],"sourcesContent":["import React from 'react';\r\nimport { UserIcon } from 'lucide-react';\r\nimport { PharmacyPatient } from './pharmacyUtils';\r\ninterface PatientListProps {\r\n  patients: PharmacyPatient[];\r\n  onPatientSelect: (patient: PharmacyPatient) => void;\r\n}\r\n\r\nexport const PatientList = ({\r\n  patients,\r\n  onPatientSelect\r\n}: PatientListProps) => {\r\n  return <div className=\"bg-white shadow rounded-lg overflow-hidden\">\r\n      <div className=\"bg-blue-600 px-4 py-3\">\r\n        <h2 className=\"text-lg font-medium text-white\">\r\n          Danh Sách Chờ Phát Thuốc\r\n        </h2>\r\n      </div>\r\n      <div className=\"divide-y divide-gray-200 max-h-96 overflow-y-auto\">\r\n        {patients.length > 0 ? patients.map(patient => <div key={patient.id} className=\"p-4 hover:bg-gray-50\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"bg-blue-100 rounded-full p-2 mr-3\">\r\n                    <UserIcon className=\"h-5 w-5 text-blue-600\" />\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900\">\r\n                      {patient.serialNumber} - {patient.fullName}\r\n                    </p>\r\n                    <p className=\"text-sm text-gray-500\">\r\n                      {patient.phone}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button onClick={() => onPatientSelect(patient)} className=\"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\">\r\n                  Phát thuốc\r\n                </button>\r\n              </div>\r\n            </div>) : <div className=\"p-4 text-center text-gray-500\">\r\n            Không có bệnh nhân nào trong danh sách chờ.\r\n          </div>}\r\n      </div>\r\n    </div>;\r\n};"],"names":[],"mappings":";;;;AACA;;;AAOO,MAAM,cAAc,CAAC,EAC1B,QAAQ,EACR,eAAe,EACE;IACjB,qBAAO,6LAAC;QAAI,WAAU;;0BAClB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAG,WAAU;8BAAiC;;;;;;;;;;;0BAIjD,6LAAC;gBAAI,WAAU;0BACZ,SAAS,MAAM,GAAG,IAAI,SAAS,GAAG,CAAC,CAAA,wBAAW,6LAAC;wBAAqB,WAAU;kCACzE,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC,yMAAA,CAAA,WAAQ;gDAAC,WAAU;;;;;;;;;;;sDAEtB,6LAAC;;8DACC,6LAAC;oDAAE,WAAU;;wDACV,QAAQ,YAAY;wDAAC;wDAAI,QAAQ,QAAQ;;;;;;;8DAE5C,6LAAC;oDAAE,WAAU;8DACV,QAAQ,KAAK;;;;;;;;;;;;;;;;;;8CAIpB,6LAAC;oCAAO,SAAS,IAAM,gBAAgB;oCAAU,WAAU;8CAAkN;;;;;;;;;;;;uBAf5N,QAAQ,EAAE;;;;8CAmBrD,6LAAC;oBAAI,WAAU;8BAAgC;;;;;;;;;;;;;;;;;AAKrE;KAnCa","debugId":null}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/pharmacyPage/Invoice.tsx"],"sourcesContent":["import React from 'react';\r\nimport { ArrowLeftIcon, PrinterIcon } from 'lucide-react';\r\nimport { PharmacyPatient, PharmacyMedicine } from './pharmacyUtils';\r\n\r\ninterface InvoiceProps {\r\n  patient: PharmacyPatient;\r\n  onClose: () => void;\r\n  onComplete: () => void;\r\n}\r\n\r\nexport const Invoice = ({\r\n  patient,\r\n  onClose,\r\n  onComplete\r\n}: InvoiceProps) => {\r\n  const currentDate = new Date().toLocaleDateString('vi-VN');\r\n  const calculateTotal = () => {\r\n    return patient.prescription.reduce((total: number, med: PharmacyMedicine) => {\r\n      return total + med.price * med.quantity;\r\n    }, 0);\r\n  };\r\n  const handlePrint = async () => {\r\n    try {\r\n      // Get token from localStorage\r\n      const token = localStorage.getItem('token') || '';\r\n      \r\n      // Call API to dispense prescription and create invoice\r\n      const dispensePrescriptionAndCreateInvoice = (await import('./pharmacyUtils'))\r\n        .dispensePrescriptionAndCreateInvoice;\r\n        \r\n      const success = await dispensePrescriptionAndCreateInvoice(patient.id, token);\r\n      \r\n      if (success) {\r\n        onComplete();\r\n      } else {\r\n        alert('Có lỗi xảy ra khi xử lý đơn thuốc. Vui lòng thử lại.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error dispensing prescription:', error);\r\n      alert('Có lỗi xảy ra khi xử lý đơn thuốc. Vui lòng thử lại.');\r\n    }\r\n  };\r\n  return <div className=\"bg-white shadow rounded-lg overflow-hidden\">\r\n      <div className=\"bg-blue-600 px-4 py-3 flex justify-between items-center\">\r\n        <div className=\"flex items-center\">\r\n          <button onClick={onClose} className=\"mr-2 text-white hover:text-blue-100\">\r\n            <ArrowLeftIcon className=\"h-5 w-5\" />\r\n          </button>\r\n          <h2 className=\"text-lg font-medium text-white\">Hóa Đơn Thuốc</h2>\r\n        </div>\r\n        <button onClick={handlePrint} className=\"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\">\r\n          <PrinterIcon className=\"h-4 w-4 mr-1\" /> In hóa đơn\r\n        </button>\r\n      </div>\r\n      <div className=\"p-6\">\r\n        <div className=\"border border-gray-200 rounded-lg p-6 mb-6\">\r\n          <div className=\"text-center mb-6\">\r\n            <h3 className=\"text-xl font-bold text-blue-800\">\r\n              PHÒNG KHÁM ĐA KHOA\r\n            </h3>\r\n            <p className=\"text-gray-500\">123 Nguyễn Huệ, Quận 1, TP.HCM</p>\r\n            <p className=\"text-gray-500\">Điện thoại: (028) 3822 1234</p>\r\n            <div className=\"mt-4 border-t pt-4\">\r\n              <h2 className=\"text-xl font-bold\">HÓA ĐƠN THUỐC</h2>\r\n              <p className=\"text-gray-500\">Ngày: {currentDate}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n            <div>\r\n              <p className=\"text-sm text-gray-500\">Họ và tên bệnh nhân</p>\r\n              <p className=\"font-medium\">{patient.fullName}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-500\">Số điện thoại</p>\r\n              <p className=\"font-medium\">{patient.phone}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-500\">Mã đơn thuốc</p>\r\n              <p className=\"font-medium\">{patient.serialNumber}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-500\">Chẩn đoán</p>\r\n              <p className=\"font-medium\">{patient.diagnosis}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-500\">Bác sĩ kê đơn</p>\r\n              <p className=\"font-medium\">{patient.doctor}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-500\">Nhân viên phát thuốc</p>\r\n              <p className=\"font-medium\">Nguyễn Thị Hà</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"overflow-x-auto mb-6\">\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    STT\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Tên thuốc\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Số lượng\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Liều dùng\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Đơn giá\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Thành tiền\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {patient.prescription.map((medicine: PharmacyMedicine, index: number) => <tr key={index}>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                      {index + 1}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                      {medicine.name}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                      {medicine.quantity}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                      {medicine.dosage}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                      {medicine.price.toLocaleString('vi-VN')} đ\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                      {(medicine.price * medicine.quantity).toLocaleString('vi-VN')}{' '}\r\n                      đ\r\n                    </td>\r\n                  </tr>)}\r\n                <tr className=\"bg-gray-50\">\r\n                  <td colSpan={5} className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right\">\r\n                    Tổng cộng:\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-700\">\r\n                    {calculateTotal().toLocaleString('vi-VN')} đ\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div className=\"grid grid-cols-2 gap-4 mt-8\">\r\n            <div className=\"text-center\">\r\n              <p className=\"font-medium\">Người lập phiếu</p>\r\n              <p className=\"text-gray-500 text-sm\">(Ký, ghi rõ họ tên)</p>\r\n              <div className=\"h-16\"></div>\r\n              <p>Nguyễn Thị Hà</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <p className=\"font-medium\">Người nhận thuốc</p>\r\n              <p className=\"text-gray-500 text-sm\">(Ký, ghi rõ họ tên)</p>\r\n              <div className=\"h-16\"></div>\r\n              <p>{patient.fullName}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>;\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 758, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/pharmacyPage/PatientDetails.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { ClipboardListIcon, PrinterIcon, UserIcon, PillIcon } from 'lucide-react';\r\nimport { Invoice } from './Invoice';\r\nimport { PharmacyPatient } from './pharmacyUtils';\r\n\r\ninterface PatientDetailsProps {\r\n  patient: PharmacyPatient;\r\n  onPatientComplete: (id: string) => void;\r\n}\r\n\r\nexport const PatientDetails = ({\r\n  patient,\r\n  onPatientComplete\r\n}: PatientDetailsProps) => {\r\n  const [showInvoice, setShowInvoice] = useState(false);\r\n  \r\n  if (showInvoice) {\r\n    return <Invoice patient={patient} onClose={() => setShowInvoice(false)} onComplete={() => onPatientComplete(patient.id)} />;\r\n  }\r\n  \r\n  const calculateTotal = () => {\r\n    return patient.prescription.reduce((total: number, med) => {\r\n      return total + med.price * med.quantity;\r\n    }, 0);\r\n  };\r\n  \r\n  return (\r\n    <div className=\"bg-white border border-gray-300 rounded-lg shadow-sm overflow-hidden\">\r\n      <div className=\"bg-gray-50 px-6 py-4 border-b border-gray-300 flex justify-between items-center\">\r\n        <h2 className=\"text-lg font-semibold text-black flex items-center\">\r\n          <PillIcon size={20} className=\"mr-2 text-black\" />\r\n          Chi Tiết Đơn Thuốc\r\n        </h2>\r\n        <button \r\n          onClick={() => setShowInvoice(true)} \r\n          className=\"inline-flex items-center px-4 py-2 text-sm font-medium rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 shadow-sm transition-colors\"\r\n        >\r\n          <PrinterIcon size={16} className=\"mr-2\" /> \r\n          Xuất hóa đơn thuốc\r\n        </button>\r\n      </div>\r\n      \r\n      <div className=\"p-6 space-y-6\">\r\n        {/* Patient Information */}\r\n        <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-300\">\r\n          <div className=\"flex items-center mb-4\">\r\n            <UserIcon size={18} className=\"text-black mr-2\" />\r\n            <h3 className=\"text-lg font-medium text-black\">\r\n              Thông tin bệnh nhân\r\n            </h3>\r\n          </div>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-black mb-1\">Họ và tên</p>\r\n              <p className=\"text-black\">{patient.fullName}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm font-medium text-black mb-1\">Số điện thoại</p>\r\n              <p className=\"text-black\">{patient.phone}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm font-medium text-black mb-1\">Mã đơn thuốc</p>\r\n              <p className=\"text-black\">{patient.serialNumber}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Medical Information */}\r\n        <div className=\"border border-gray-300 rounded-lg p-4\">\r\n          <div className=\"flex items-center mb-4\">\r\n            <ClipboardListIcon size={18} className=\"text-black mr-2\" />\r\n            <h3 className=\"text-lg font-medium text-black\">\r\n              Thông tin y tế\r\n            </h3>\r\n          </div>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-black mb-1\">Tiền sử bệnh</p>\r\n              <p className=\"text-black\">{patient.medicalHistory}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm font-medium text-black mb-1\">Chẩn đoán</p>\r\n              <p className=\"text-black\">{patient.diagnosis}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm font-medium text-black mb-1\">Bác sĩ</p>\r\n              <p className=\"text-black\">{patient.doctor}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Prescription */}\r\n        <div>\r\n          <h3 className=\"text-lg font-medium text-black mb-4 flex items-center\">\r\n            <PillIcon size={18} className=\"mr-2 text-black\" />\r\n            Đơn thuốc\r\n          </h3>\r\n          \r\n          <div className=\"overflow-x-auto border border-gray-300 rounded-lg\">\r\n            <table className=\"min-w-full divide-y divide-gray-300\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-300\">\r\n                    STT\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-300\">\r\n                    Tên thuốc\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-300\">\r\n                    Số lượng\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-300\">\r\n                    Liều dùng\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-300\">\r\n                    Đơn giá\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-300\">\r\n                    Thành tiền\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              \r\n              <tbody className=\"bg-white divide-y divide-gray-300\">\r\n                {patient.prescription.map((medicine, index: number) => (\r\n                  <tr key={index} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\r\n                      {index + 1}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\r\n                      {medicine.name}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\r\n                      {medicine.quantity}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\r\n                      {medicine.dosage}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\r\n                      {medicine.price.toLocaleString('vi-VN')} đ\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\r\n                      {(medicine.price * medicine.quantity).toLocaleString('vi-VN')} đ\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n                \r\n                <tr className=\"bg-gray-100\">\r\n                  <td colSpan={5} className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-black text-right border-t border-gray-400\">\r\n                    Tổng cộng:\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-bold text-black border-t border-gray-400\">\r\n                    {calculateTotal().toLocaleString('vi-VN')} đ\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1312, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/pharmacyPage/InvoiceDetailModal.tsx"],"sourcesContent":["import React from 'react';\r\nimport { XIcon, FileTextIcon, PrinterIcon } from 'lucide-react';\r\nimport { PharmacyPatient, PharmacyInvoice, PharmacyMedicine } from './pharmacyUtils';\r\n\r\ninterface InvoiceDetailModalProps {\r\n  invoice: PharmacyInvoice;\r\n  patient: PharmacyPatient;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const InvoiceDetailModal = ({\r\n  invoice,\r\n  patient,\r\n  onClose\r\n}: InvoiceDetailModalProps) => {\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n      <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"bg-gray-50 border-b border-gray-300\">\r\n          <div className=\"px-6 py-4 flex items-center justify-between\">\r\n            <h2 className=\"text-xl font-bold text-black flex items-center\">\r\n              <FileTextIcon size={20} className=\"mr-2 text-black\" />\r\n              Chi Tiết Hóa Đơn #{invoice.id}\r\n            </h2>\r\n            <button \r\n              onClick={onClose} \r\n              className=\"p-1.5 rounded-full hover:bg-gray-200 text-black transition-colors\"\r\n            >\r\n              <XIcon size={20} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"p-6\">\r\n          <div className=\"border border-gray-300 rounded-lg p-6\">\r\n            <div className=\"text-center mb-6\">\r\n              <h3 className=\"text-xl font-bold text-black\">\r\n                PHÒNG KHÁM ĐA KHOA\r\n              </h3>\r\n              <p className=\"text-black mt-1\">123 Nguyễn Huệ, Quận 1, TP.HCM</p>\r\n              <p className=\"text-black\">Điện thoại: (028) 3822 1234</p>\r\n              <div className=\"mt-4 border-t border-gray-300 pt-4\">\r\n                <h2 className=\"text-xl font-bold text-black\">HÓA ĐƠN THUỐC</h2>\r\n                <p className=\"text-black mt-1\">\r\n                  Ngày: {new Date(invoice.date).toLocaleDateString('vi-VN')}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 bg-gray-50 p-4 rounded-lg border border-gray-200\">\r\n              <div>\r\n                <p className=\"text-sm font-medium text-black mb-1\">Họ và tên bệnh nhân</p>\r\n                <p className=\"text-black\">{patient.fullName}</p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm font-medium text-black mb-1\">Số điện thoại</p>\r\n                <p className=\"text-black\">{patient.phone}</p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm font-medium text-black mb-1\">Mã đơn thuốc</p>\r\n                <p className=\"text-black\">{patient.serialNumber}</p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm font-medium text-black mb-1\">Chẩn đoán</p>\r\n                <p className=\"text-black\">{patient.diagnosis}</p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm font-medium text-black mb-1\">Bác sĩ kê đơn</p>\r\n                <p className=\"text-black\">{patient.doctor}</p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm font-medium text-black mb-1\">Nhân viên phát thuốc</p>\r\n                <p className=\"text-black\">{invoice.pharmacistName}</p>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"overflow-x-auto mb-6 border border-gray-300 rounded-lg\">\r\n              <table className=\"min-w-full divide-y divide-gray-300\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-300\">\r\n                      STT\r\n                    </th>\r\n                    <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-300\">\r\n                      Tên thuốc\r\n                    </th>\r\n                    <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-300\">\r\n                      Số lượng\r\n                    </th>\r\n                    <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-300\">\r\n                      Liều dùng\r\n                    </th>\r\n                    <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-300\">\r\n                      Đơn giá\r\n                    </th>\r\n                    <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-300\">\r\n                      Thành tiền\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {patient.prescription.map((medicine: PharmacyMedicine, index: number) => (\r\n                    <tr key={index} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\r\n                        {index + 1}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\r\n                        {medicine.name}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\r\n                        {medicine.quantity}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\r\n                        {medicine.dosage}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\r\n                        {medicine.price.toLocaleString('vi-VN')} đ\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\r\n                        {(medicine.price * medicine.quantity).toLocaleString('vi-VN')} đ\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                  <tr className=\"bg-gray-100\">\r\n                    <td colSpan={5} className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-black text-right border-t border-gray-400\">\r\n                      Tổng cộng:\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-bold text-black border-t border-gray-400\">\r\n                      {invoice.totalAmount.toLocaleString('vi-VN')} đ\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            \r\n            <div className=\"flex justify-end mt-6\">\r\n              <button className=\"px-5 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center transition-colors shadow-sm\">\r\n                <PrinterIcon size={18} className=\"mr-2\" />\r\n                In hóa đơn\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1842, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/pharmacyPage/pharmacyUtils.ts"],"sourcesContent":["import { \r\n  getPendingPrescriptions, \r\n  getPrescriptionDetails, \r\n  dispensePrescription,\r\n  createInvoice,\r\n  getInvoices,\r\n  getRevenue\r\n} from '../services/api.service';\r\n\r\n// Type definitions to match the pharmacy page UI needs\r\nexport interface PharmacyPatient {\r\n  id: string;\r\n  serialNumber: string;\r\n  fullName: string;\r\n  phone: string;\r\n  diagnosis: string;\r\n  doctor: string;\r\n  prescription: PharmacyMedicine[];\r\n}\r\n\r\nexport interface PharmacyMedicine {\r\n  name: string;\r\n  quantity: number;\r\n  dosage: string;\r\n  price: number;\r\n}\r\n\r\nexport interface PharmacyInvoice {\r\n  id: string;\r\n  date: string;\r\n  patientId: string;\r\n  pharmacistName: string;\r\n  totalAmount: number;\r\n}\r\n\r\n// API-based functions with async/await\r\n\r\n// Function to get patients with pending prescriptions for the pharmacy\r\nexport const getPatientsWithPendingPrescriptions = async (token: string): Promise<PharmacyPatient[]> => {\r\n  try {\r\n    // Get prescriptions with status PENDING_DISPENSE from API\r\n    const response = await getPendingPrescriptions(token);\r\n    \r\n    if (!response.data || !response.data.length) return [];\r\n    \r\n    // Map API response to pharmacy patient format\r\n    return response.data.map((prescription: any) => {\r\n      return {\r\n        id: prescription._id,\r\n        serialNumber: prescription.customPrescriptionId || `P${prescription._id.slice(-5)}`,\r\n        fullName: prescription.patientId?.fullName || 'Unknown',\r\n        phone: prescription.patientId?.phone || 'N/A',\r\n        diagnosis: prescription.diagnosis,\r\n        doctor: prescription.doctorId?.fullName || 'Không xác định',\r\n        prescription: prescription.medicines ? prescription.medicines.map((med: any) => ({\r\n          name: med.name,\r\n          quantity: med.quantity,\r\n          dosage: med.dosage,\r\n          price: med.price || 0\r\n        })) : []\r\n      };\r\n    });\r\n  } catch (error) {\r\n    console.error('Error fetching pending prescriptions:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n// Function to dispense a prescription and create invoice\r\nexport const dispensePrescriptionAndCreateInvoice = async (prescriptionId: string, token: string): Promise<boolean> => {\r\n  try {\r\n    // Đánh dấu đơn thuốc đã phát\r\n    const dispensed = await dispensePrescription(prescriptionId, token);\r\n    \r\n    if (!dispensed.success) return false;\r\n    \r\n    // Lấy chi tiết đơn thuốc để tính tổng tiền\r\n    const details = await getPrescriptionDetails(prescriptionId, token);\r\n    \r\n    const totalAmount = details.data.medicines.reduce((sum: number, med: any) => \r\n      sum + (med.price * med.quantity), 0);\r\n    \r\n    // Tạo hóa đơn mới\r\n    const invoiceData = {\r\n      prescriptionId,\r\n      patientId: details.data.patientId,\r\n      totalAmount,\r\n      status: 'PAID'\r\n    };\r\n    \r\n    await createInvoice(invoiceData, token);\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error dispensing prescription:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n// Function to get pharmacy invoice data\r\nexport const getPharmacyInvoices = async (token: string): Promise<PharmacyInvoice[]> => {\r\n  try {\r\n    const response = await getInvoices(token);\r\n    \r\n    if (!response.data || !response.data.length) return [];\r\n    \r\n    return response.data.map((invoice: any) => {\r\n      return {\r\n        id: invoice._id,\r\n        date: invoice.createdAt,\r\n        patientId: invoice.patientId,\r\n        pharmacistName: invoice.pharmacist?.fullName || 'Nhân viên phát thuốc',\r\n        totalAmount: invoice.totalAmount\r\n      };\r\n    });\r\n  } catch (error) {\r\n    console.error('Error fetching invoices:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n// Function to get daily revenue data for statistics\r\nexport const getDailyRevenue = async (token: string) => {\r\n  try {\r\n    const today = new Date().toISOString().split('T')[0]; // Format YYYY-MM-DD\r\n    const response = await getRevenue('daily', today, token);\r\n    \r\n    if (!response.data) return [];\r\n    \r\n    // Convert API response to UI format\r\n    return Object.entries(response.data).map(([date, amount]: [string, any]) => ({\r\n      date,\r\n      amount: Number(amount)\r\n    }));\r\n  } catch (error) {\r\n    console.error('Error fetching revenue data:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n// Function to get invoices for a specific date\r\nexport const getInvoicesForDate = async (date: string, token: string) => {\r\n  try {\r\n    const query = `?date=${date}`;\r\n    const response = await getInvoices(token, query);\r\n    \r\n    if (!response.data) return [];\r\n    \r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching invoices for date:', error);\r\n    return [];\r\n  }\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1953, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/datats/mockPatients.ts"],"sourcesContent":["// Mock database dựa trên cấu trúc MongoDB\r\n\r\n// Khai báo các interface\r\nexport interface User {\r\n  _id: string;\r\n  userId: string;\r\n  username: string;\r\n  email: string;\r\n  password: string;\r\n  fullName: string;\r\n  phone: string;\r\n  role: 'PATIENT' | 'DOCTOR' | 'PHARMACIST' | 'RECEPTIONIST' | 'ADMIN';\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  __v: number;\r\n}\r\n\r\nexport interface Queue {\r\n  _id: string;\r\n  patient: string; // ObjectId của bệnh nhân\r\n  status: 'waiting' | 'in_progress' | 'completed' | 'canceled';\r\n  doctorId?: string; // ObjectId của bác sĩ được chỉ định (nếu có)\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  __v: number;\r\n}\r\n\r\nexport interface Prescription {\r\n  _id: string;\r\n  customPrescriptionId: string;\r\n  patientId: string; // ObjectId\r\n  doctorId: string; // ObjectId\r\n  diagnosis: string;\r\n  date: string;\r\n  status: 'PENDING_DISPENSE' | 'DISPENSED' | 'CANCELED';\r\n  __v: number;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface PrescriptionDetail {\r\n  _id: string;\r\n  customPrescriptionDetailId: string;\r\n  prescriptionId: string; // ObjectId\r\n  medicineId: string; // ObjectId\r\n  quantity: number;\r\n  dosage: string;\r\n  __v: number;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface Medicine {\r\n  _id: string;\r\n  customMedicineId: string;\r\n  name: string;\r\n  totalPills: number;\r\n  price: number;\r\n  __v: number;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface Invoice {\r\n  _id: string;\r\n  prescriptionId: string; // ObjectId\r\n  patientId: string; // ObjectId\r\n  totalAmount: number;\r\n  status: 'PAID' | 'UNPAID';\r\n  __v: number;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\n// Mock data - Users (Patients, Doctors, etc.)\r\nexport const mockUsers: User[] = [\r\n  {\r\n    _id: '685face13fc4c04e1bd96c06',\r\n    userId: 'u1',\r\n    username: 'nguyen.an',\r\n    email: 'an.nguyen@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Nguyễn Văn An',\r\n    phone: '0901234567',\r\n    role: 'PATIENT',\r\n    createdAt: '2025-06-28T08:50:41.269+00:00',\r\n    updatedAt: '2025-06-28T08:50:41.269+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c07',\r\n    userId: 'u2',\r\n    username: 'tran.binh',\r\n    email: 'binh.tran@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Trần Văn Bình',\r\n    phone: '0912345678',\r\n    role: 'PATIENT',\r\n    createdAt: '2025-06-28T09:15:22.123+00:00',\r\n    updatedAt: '2025-06-28T09:15:22.123+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c08',\r\n    userId: 'd1',\r\n    username: 'dr.hoa',\r\n    email: 'hoa.doctor@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Bác sĩ Trần Thị Hoa',\r\n    phone: '0923456789',\r\n    role: 'DOCTOR',\r\n    createdAt: '2025-06-28T10:05:17.456+00:00',\r\n    updatedAt: '2025-06-28T10:05:17.456+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c09',\r\n    userId: 'u3',\r\n    username: 'le.chi',\r\n    email: 'chi.le@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Lê Thị Chi',\r\n    phone: '0934567890',\r\n    role: 'PATIENT',\r\n    createdAt: '2025-06-28T11:30:45.789+00:00',\r\n    updatedAt: '2025-06-28T11:30:45.789+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c0a',\r\n    userId: 'p1',\r\n    username: 'pham.dung',\r\n    email: 'dung.pham@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Phạm Văn Dũng',\r\n    phone: '0945678901',\r\n    role: 'PHARMACIST',\r\n    createdAt: '2025-06-28T12:45:33.012+00:00',\r\n    updatedAt: '2025-06-28T12:45:33.012+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c0b',\r\n    userId: 'r1',\r\n    username: 'receptionist.minh',\r\n    email: 'minh.receptionist@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Nguyễn Thị Minh',\r\n    phone: '0956789012',\r\n    role: 'RECEPTIONIST',\r\n    createdAt: '2025-06-28T14:20:10.345+00:00',\r\n    updatedAt: '2025-06-28T14:20:10.345+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c0c',\r\n    userId: 'a1',\r\n    username: 'admin.tuan',\r\n    email: 'tuan.admin@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Lê Minh Tuấn',\r\n    phone: '0967890123',\r\n    role: 'ADMIN',\r\n    createdAt: '2025-06-28T15:55:27.678+00:00',\r\n    updatedAt: '2025-06-28T15:55:27.678+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c0d',\r\n    userId: 'u4',\r\n    username: 'hoang.em',\r\n    email: 'em.hoang@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Hoàng Thị Em',\r\n    phone: '0978901234',\r\n    role: 'PATIENT',\r\n    createdAt: '2025-06-28T16:30:50.901+00:00',\r\n    updatedAt: '2025-06-28T16:30:50.901+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c0e',\r\n    userId: 'u5',\r\n    username: 'nguyen.khang',\r\n    email: 'khang.nguyen@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Nguyễn Minh Khang',\r\n    phone: '0989012345',\r\n    role: 'PATIENT',\r\n    createdAt: '2025-06-28T17:15:42.234+00:00',\r\n    updatedAt: '2025-06-28T17:15:42.234+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c0f',\r\n    userId: 'd2',\r\n    username: 'dr.trang',\r\n    email: 'trang.doctor@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Bác sĩ Lê Thị Trang',\r\n    phone: '0990123456',\r\n    role: 'DOCTOR',\r\n    createdAt: '2025-06-28T18:40:15.567+00:00',\r\n    updatedAt: '2025-06-28T18:40:15.567+00:00',\r\n    __v: 0\r\n  }\r\n];\r\n\r\n// Mock data - Queue\r\nexport const mockQueues: Queue[] = [\r\n  {\r\n    _id: '685f10baa8040f24f1a9014d',\r\n    patient: '685face13fc4c04e1bd96c06', // Nguyễn Văn An\r\n    status: 'waiting',\r\n    createdAt: '2025-06-27T21:44:26.099+00:00',\r\n    updatedAt: '2025-06-27T21:44:26.102+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685f10baa8040f24f1a9014e',\r\n    patient: '685face13fc4c04e1bd96c07', // Trần Văn Bình\r\n    status: 'in_progress',\r\n    createdAt: '2025-06-27T22:30:15.456+00:00',\r\n    updatedAt: '2025-06-27T22:45:20.789+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685f10baa8040f24f1a9014f',\r\n    patient: '685face13fc4c04e1bd96c09', // Lê Thị Chi\r\n    status: 'completed',\r\n    createdAt: '2025-06-27T20:15:33.222+00:00',\r\n    updatedAt: '2025-06-27T21:05:42.111+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685f10baa8040f24f1a90150',\r\n    patient: '685face13fc4c04e1bd96c0d', // Hoàng Thị Em\r\n    status: 'waiting',\r\n    createdAt: '2025-06-28T08:22:17.345+00:00',\r\n    updatedAt: '2025-06-28T08:22:17.345+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685f10baa8040f24f1a90151',\r\n    patient: '685face13fc4c04e1bd96c0e', // Nguyễn Minh Khang\r\n    status: 'canceled',\r\n    createdAt: '2025-06-28T07:45:10.123+00:00',\r\n    updatedAt: '2025-06-28T08:15:23.456+00:00',\r\n    __v: 0\r\n  }\r\n];\r\n\r\n// Mock data - Medicines\r\nexport const mockMedicines: Medicine[] = [\r\n  {\r\n    _id: '685face13fc4c04e1bd96c10',\r\n    customMedicineId: 'm1',\r\n    name: 'Paracetamol 500mg',\r\n    totalPills: 980,\r\n    price: 0.5,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:41.969+00:00',\r\n    updatedAt: '2025-06-28T10:57:49.516+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c11',\r\n    customMedicineId: 'm2',\r\n    name: 'Amoxicillin 500mg',\r\n    totalPills: 850,\r\n    price: 1.2,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.001+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.001+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c12',\r\n    customMedicineId: 'm3',\r\n    name: 'Ibuprofen 200mg',\r\n    totalPills: 1200,\r\n    price: 0.7,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.010+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.010+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c1a',\r\n    customMedicineId: 'm4',\r\n    name: 'Cetirizine 10mg',\r\n    totalPills: 750,\r\n    price: 0.8,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.022+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.022+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c1b',\r\n    customMedicineId: 'm5',\r\n    name: 'Omeprazole 20mg',\r\n    totalPills: 630,\r\n    price: 1.5,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d20',\r\n    customMedicineId: 'm6',\r\n    name: 'Loratadine 10mg',\r\n    totalPills: 520,\r\n    price: 0.9,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d21',\r\n    customMedicineId: 'm7',\r\n    name: 'Amlodipine 5mg',\r\n    totalPills: 480,\r\n    price: 1.8,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d22',\r\n    customMedicineId: 'm8',\r\n    name: 'Atorvastatin 20mg',\r\n    totalPills: 360,\r\n    price: 2.5,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d23',\r\n    customMedicineId: 'm9',\r\n    name: 'Metformin 500mg',\r\n    totalPills: 720,\r\n    price: 0.6,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d24',\r\n    customMedicineId: 'm10',\r\n    name: 'Clopidogrel 75mg',\r\n    totalPills: 280,\r\n    price: 3.2,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d25',\r\n    customMedicineId: 'm11',\r\n    name: 'Losartan 50mg',\r\n    totalPills: 420,\r\n    price: 2.1,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d26',\r\n    customMedicineId: 'm12',\r\n    name: 'Simvastatin 40mg',\r\n    totalPills: 310,\r\n    price: 1.7,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d27',\r\n    customMedicineId: 'm13',\r\n    name: 'Aspirin 100mg',\r\n    totalPills: 940,\r\n    price: 0.3,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d28',\r\n    customMedicineId: 'm14',\r\n    name: 'Metoprolol 25mg',\r\n    totalPills: 390,\r\n    price: 1.9,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d29',\r\n    customMedicineId: 'm15',\r\n    name: 'Furosemide 40mg',\r\n    totalPills: 280,\r\n    price: 1.4,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d30',\r\n    customMedicineId: 'm16',\r\n    name: 'Pantoprazole 40mg',\r\n    totalPills: 450,\r\n    price: 2.0,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d31',\r\n    customMedicineId: 'm17',\r\n    name: 'Fluoxetine 20mg',\r\n    totalPills: 320,\r\n    price: 2.3,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d32',\r\n    customMedicineId: 'm18',\r\n    name: 'Sertraline 50mg',\r\n    totalPills: 290,\r\n    price: 2.4,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d33',\r\n    customMedicineId: 'm19',\r\n    name: 'Ranitidine 150mg',\r\n    totalPills: 580,\r\n    price: 0.8,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d34',\r\n    customMedicineId: 'm20',\r\n    name: 'Tramadol 50mg',\r\n    totalPills: 240,\r\n    price: 2.8,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d35',\r\n    customMedicineId: 'm21',\r\n    name: 'Diazepam 5mg',\r\n    totalPills: 180,\r\n    price: 3.5,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d36',\r\n    customMedicineId: 'm22',\r\n    name: 'Gabapentin 300mg',\r\n    totalPills: 340,\r\n    price: 2.2,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d37',\r\n    customMedicineId: 'm23',\r\n    name: 'Pregabalin 75mg',\r\n    totalPills: 260,\r\n    price: 3.1,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d38',\r\n    customMedicineId: 'm24',\r\n    name: 'Lisinopril 10mg',\r\n    totalPills: 410,\r\n    price: 1.6,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d39',\r\n    customMedicineId: 'm25',\r\n    name: 'Vitamin D3 1000IU',\r\n    totalPills: 790,\r\n    price: 0.4,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d40',\r\n    customMedicineId: 'm26',\r\n    name: 'Folic Acid 5mg',\r\n    totalPills: 870,\r\n    price: 0.3,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d41',\r\n    customMedicineId: 'm27',\r\n    name: 'Calcium Carbonate 500mg',\r\n    totalPills: 680,\r\n    price: 0.5,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d42',\r\n    customMedicineId: 'm28',\r\n    name: 'Azithromycin 500mg',\r\n    totalPills: 220,\r\n    price: 3.8,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d43',\r\n    customMedicineId: 'm29',\r\n    name: 'Ciprofloxacin 500mg',\r\n    totalPills: 250,\r\n    price: 2.9,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96d44',\r\n    customMedicineId: 'm30',\r\n    name: 'Montelukast 10mg',\r\n    totalPills: 310,\r\n    price: 2.7,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  }\r\n];\r\n\r\n// Mock data - Prescriptions\r\nexport const mockPrescriptions: Prescription[] = [\r\n  {\r\n    _id: '685face23fc4c04e1bd96c13',\r\n    customPrescriptionId: 'pr1',\r\n    patientId: '685face13fc4c04e1bd96c06', // Nguyễn Văn An\r\n    doctorId: '685face13fc4c04e1bd96c08', // Bác sĩ Trần Thị Hoa\r\n    diagnosis: 'Common Cold',\r\n    date: '2024-06-01T10:00:00.000+00:00',\r\n    status: 'PENDING_DISPENSE',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.030+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.030+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c14',\r\n    customPrescriptionId: 'pr2',\r\n    patientId: '685face13fc4c04e1bd96c07', // Trần Văn Bình\r\n    doctorId: '685face13fc4c04e1bd96c0f', // Bác sĩ Lê Thị Trang\r\n    diagnosis: 'Allergic Rhinitis',\r\n    date: '2024-06-02T11:30:00.000+00:00',\r\n    status: 'DISPENSED',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T09:30:10.123+00:00',\r\n    updatedAt: '2025-06-28T10:15:22.456+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c15',\r\n    customPrescriptionId: 'pr3',\r\n    patientId: '685face13fc4c04e1bd96c09', // Lê Thị Chi\r\n    doctorId: '685face13fc4c04e1bd96c08', // Bác sĩ Trần Thị Hoa\r\n    diagnosis: 'Gastritis',\r\n    date: '2024-06-03T14:45:00.000+00:00',\r\n    status: 'PENDING_DISPENSE',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T14:50:33.789+00:00',\r\n    updatedAt: '2025-06-28T14:50:33.789+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c1c',\r\n    customPrescriptionId: 'pr4',\r\n    patientId: '685face13fc4c04e1bd96c0d', // Hoàng Thị Em\r\n    doctorId: '685face13fc4c04e1bd96c0f', // Bác sĩ Lê Thị Trang\r\n    diagnosis: 'Migraine',\r\n    date: '2024-06-04T09:15:00.000+00:00',\r\n    status: 'CANCELED',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T09:20:45.111+00:00',\r\n    updatedAt: '2025-06-28T11:05:17.222+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c1d',\r\n    customPrescriptionId: 'pr5',\r\n    patientId: '685face13fc4c04e1bd96c0e', // Nguyễn Minh Khang\r\n    doctorId: '685face13fc4c04e1bd96c08', // Bác sĩ Trần Thị Hoa\r\n    diagnosis: 'Hypertension',\r\n    date: '2024-06-05T16:00:00.000+00:00',\r\n    status: 'DISPENSED',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T16:05:22.333+00:00',\r\n    updatedAt: '2025-06-28T17:30:14.444+00:00'\r\n  }\r\n];\r\n\r\n// Mock data - Prescription Details\r\nexport const mockPrescriptionDetails: PrescriptionDetail[] = [\r\n  {\r\n    _id: '685face23fc4c04e1bd96c16',\r\n    customPrescriptionDetailId: 'pd1',\r\n    prescriptionId: '685face23fc4c04e1bd96c13', // pr1 - Common Cold\r\n    medicineId: '685face13fc4c04e1bd96c10', // Paracetamol 500mg\r\n    quantity: 10,\r\n    dosage: '1 tablet every 6 hours',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.083+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.083+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c17',\r\n    customPrescriptionDetailId: 'pd2',\r\n    prescriptionId: '685face23fc4c04e1bd96c13', // pr1 - Common Cold\r\n    medicineId: '685face13fc4c04e1bd96c1a', // Cetirizine 10mg\r\n    quantity: 5,\r\n    dosage: '1 tablet daily before sleep',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.085+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.085+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c18',\r\n    customPrescriptionDetailId: 'pd3',\r\n    prescriptionId: '685face23fc4c04e1bd96c14', // pr2 - Allergic Rhinitis\r\n    medicineId: '685face13fc4c04e1bd96c1a', // Cetirizine 10mg\r\n    quantity: 15,\r\n    dosage: '1 tablet daily in the morning',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T09:30:10.150+00:00',\r\n    updatedAt: '2025-06-28T09:30:10.150+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c19',\r\n    customPrescriptionDetailId: 'pd4',\r\n    prescriptionId: '685face23fc4c04e1bd96c15', // pr3 - Gastritis\r\n    medicineId: '685face13fc4c04e1bd96c1b', // Omeprazole 20mg\r\n    quantity: 14,\r\n    dosage: '1 tablet daily before breakfast',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T14:50:33.800+00:00',\r\n    updatedAt: '2025-06-28T14:50:33.800+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c1e',\r\n    customPrescriptionDetailId: 'pd5',\r\n    prescriptionId: '685face23fc4c04e1bd96c1c', // pr4 - Migraine\r\n    medicineId: '685face13fc4c04e1bd96c12', // Ibuprofen 200mg\r\n    quantity: 20,\r\n    dosage: '2 tablets every 8 hours when in pain',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T09:20:45.130+00:00',\r\n    updatedAt: '2025-06-28T09:20:45.130+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c1f',\r\n    customPrescriptionDetailId: 'pd6',\r\n    prescriptionId: '685face23fc4c04e1bd96c1d', // pr5 - Hypertension\r\n    medicineId: '685face13fc4c04e1bd96c11', // Amoxicillin 500mg\r\n    quantity: 30,\r\n    dosage: '1 tablet three times daily after meals',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T16:05:22.350+00:00',\r\n    updatedAt: '2025-06-28T16:05:22.350+00:00'\r\n  }\r\n];\r\n\r\n// Mock data - Invoices\r\nexport const mockInvoices: Invoice[] = [\r\n  {\r\n    _id: '685f6f336bd59d7487de3ce8',\r\n    prescriptionId: '685face23fc4c04e1bd96c14', // pr2\r\n    patientId: '685face13fc4c04e1bd96c07', // Trần Văn Bình\r\n    totalAmount: 12.0,\r\n    status: 'PAID',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T10:15:22.456+00:00',\r\n    updatedAt: '2025-06-28T10:15:22.456+00:00'\r\n  },\r\n  {\r\n    _id: '685f6f336bd59d7487de3ce9',\r\n    prescriptionId: '685face23fc4c04e1bd96c1d', // pr5\r\n    patientId: '685face13fc4c04e1bd96c0e', // Nguyễn Minh Khang\r\n    totalAmount: 36.0,\r\n    status: 'PAID',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T17:30:14.444+00:00',\r\n    updatedAt: '2025-06-28T17:30:14.444+00:00'\r\n  },\r\n  {\r\n    _id: '685f6f336bd59d7487de3cea',\r\n    prescriptionId: '685face23fc4c04e1bd96c13', // pr1\r\n    patientId: '685face13fc4c04e1bd96c06', // Nguyễn Văn An\r\n    totalAmount: 9.0,\r\n    status: 'UNPAID',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.030+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.030+00:00'\r\n  }\r\n];\r\n\r\n// Hàm tiện ích để làm việc với dữ liệu\r\n\r\n// Users\r\nexport const getAllUsers = () => [...mockUsers];\r\n\r\nexport const getUserById = (id: string) => {\r\n  return mockUsers.find(user => user._id === id);\r\n};\r\n\r\nexport const getUsersByRole = (role: string) => {\r\n  return mockUsers.filter(user => user.role === role);\r\n};\r\n\r\nexport const searchUsers = (searchTerm: string) => {\r\n  const term = searchTerm.toLowerCase();\r\n  return mockUsers.filter(user => \r\n    user.fullName.toLowerCase().includes(term) || \r\n    user.username.toLowerCase().includes(term) ||\r\n    user.email.toLowerCase().includes(term) ||\r\n    user.phone.includes(term) ||\r\n    user.userId.includes(term)\r\n  );\r\n};\r\n\r\n// Queues\r\nexport const getAllQueues = () => [...mockQueues];\r\n\r\nexport const getQueuesByStatus = (status: string) => {\r\n  return mockQueues.filter(queue => queue.status === status);\r\n};\r\n\r\nexport const getQueueByPatientId = (patientId: string) => {\r\n  return mockQueues.find(queue => queue.patient === patientId);\r\n};\r\n\r\n// Medicines\r\nexport const getAllMedicines = () => [...mockMedicines];\r\n\r\nexport const getMedicineById = (id: string) => {\r\n  return mockMedicines.find(medicine => medicine._id === id);\r\n};\r\n\r\nexport const searchMedicines = (searchTerm: string) => {\r\n  const term = searchTerm.toLowerCase();\r\n  return mockMedicines.filter(medicine => \r\n    medicine.name.toLowerCase().includes(term) || \r\n    medicine.customMedicineId.includes(term)\r\n  );\r\n};\r\n\r\n// Prescriptions\r\nexport const getAllPrescriptions = () => [...mockPrescriptions];\r\n\r\nexport const getPrescriptionById = (id: string) => {\r\n  return mockPrescriptions.find(prescription => prescription._id === id);\r\n};\r\n\r\nexport const getPrescriptionsByPatientId = (patientId: string) => {\r\n  return mockPrescriptions.filter(prescription => prescription.patientId === patientId);\r\n};\r\n\r\nexport const getPrescriptionsByDoctorId = (doctorId: string) => {\r\n  return mockPrescriptions.filter(prescription => prescription.doctorId === doctorId);\r\n};\r\n\r\nexport const getPrescriptionsByStatus = (status: string) => {\r\n  return mockPrescriptions.filter(prescription => prescription.status === status);\r\n};\r\n\r\n// Prescription Details\r\nexport const getAllPrescriptionDetails = () => [...mockPrescriptionDetails];\r\n\r\nexport const getPrescriptionDetailsByPrescriptionId = (prescriptionId: string) => {\r\n  return mockPrescriptionDetails.filter(detail => detail.prescriptionId === prescriptionId);\r\n};\r\n\r\nexport const getMedicinesForPrescription = (prescriptionId: string) => {\r\n  const details = getPrescriptionDetailsByPrescriptionId(prescriptionId);\r\n  return details.map(detail => {\r\n    const medicine = getMedicineById(detail.medicineId);\r\n    return {\r\n      ...detail,\r\n      medicine: medicine || null\r\n    };\r\n  });\r\n};\r\n\r\n// Invoices\r\nexport const getAllInvoices = () => [...mockInvoices];\r\n\r\nexport const getInvoiceById = (id: string) => {\r\n  return mockInvoices.find(invoice => invoice._id === id);\r\n};\r\n\r\nexport const getInvoiceByPrescriptionId = (prescriptionId: string) => {\r\n  return mockInvoices.find(invoice => invoice.prescriptionId === prescriptionId);\r\n};\r\n\r\nexport const getInvoicesByPatientId = (patientId: string) => {\r\n  return mockInvoices.filter(invoice => invoice.patientId === patientId);\r\n};\r\n\r\nexport const getInvoicesByStatus = (status: string) => {\r\n  return mockInvoices.filter(invoice => invoice.status === status);\r\n};\r\n\r\n// Hàm hữu ích khác\r\nexport const getPatientFullPrescriptionDetails = (patientId: string) => {\r\n  // Lấy tất cả đơn thuốc của bệnh nhân\r\n  const prescriptions = getPrescriptionsByPatientId(patientId);\r\n  \r\n  return prescriptions.map(prescription => {\r\n    // Lấy thông tin bác sĩ\r\n    const doctor = getUserById(prescription.doctorId);\r\n    \r\n    // Lấy chi tiết đơn thuốc và thông tin thuốc\r\n    const details = getPrescriptionDetailsByPrescriptionId(prescription._id);\r\n    const medicineDetails = details.map(detail => {\r\n      const medicine = getMedicineById(detail.medicineId);\r\n      return {\r\n        ...detail,\r\n        medicineName: medicine ? medicine.name : 'Unknown',\r\n        medicinePrice: medicine ? medicine.price : 0\r\n      };\r\n    });\r\n    \r\n    // Lấy hóa đơn nếu có\r\n    const invoice = getInvoiceByPrescriptionId(prescription._id);\r\n    \r\n    return {\r\n      ...prescription,\r\n      doctorName: doctor ? doctor.fullName : 'Unknown',\r\n      details: medicineDetails,\r\n      invoice: invoice || null\r\n    };\r\n  });\r\n};\r\n\r\n// Hàm lấy danh sách bệnh nhân\r\nexport const getAllPatients = () => {\r\n  return mockUsers.filter(user => user.role === 'PATIENT');\r\n};\r\n\r\n// Hàm lấy danh sách bác sĩ\r\nexport const getAllDoctors = () => {\r\n  return mockUsers.filter(user => user.role === 'DOCTOR');\r\n};\r\n\r\n// Type aliases để thuận tiện cho việc sử dụng\r\nexport type Patient = User;\r\nexport const mockPatients = getAllPatients();\r\n\r\n// Hàm tạo MongoDB-like ID\r\nexport const generateMongoId = () => {\r\n  // MongoDB ObjectId format: 24 hex characters\r\n  const timestamp = Math.floor(Date.now() / 1000).toString(16).padStart(8, '0');\r\n  const randomPart = Array(16).fill(0).map(() => Math.floor(Math.random() * 16).toString(16)).join('');\r\n  return timestamp + randomPart;\r\n};\r\n\r\n// Hàm tạo userId tự động\r\nexport const generateNextUserId = () => {\r\n  // Tìm user ID lớn nhất hiện tại với pattern 'u' + number\r\n  const patientUserIds = mockUsers\r\n    .filter(user => user.role === 'PATIENT' && /^u\\d+$/.test(user.userId))\r\n    .map(user => parseInt(user.userId.substring(1)));\r\n  \r\n  const nextNumber = patientUserIds.length > 0 ? Math.max(...patientUserIds) + 1 : 1;\r\n  return `u${nextNumber}`;\r\n};\r\n\r\n// Hàm kiểm tra trùng lặp userId, username, email\r\nconst checkDuplicates = (patient: Partial<User>) => {\r\n  const errors = [];\r\n  \r\n  // Kiểm tra userId nếu được cung cấp\r\n  if (patient.userId && mockUsers.some(user => user.userId === patient.userId)) {\r\n    errors.push(`User ID '${patient.userId}' đã tồn tại`);\r\n  }\r\n  \r\n  // Kiểm tra username nếu được cung cấp\r\n  if (patient.username && mockUsers.some(user => user.username === patient.username)) {\r\n    errors.push(`Username '${patient.username}' đã tồn tại`);\r\n  }\r\n  \r\n  // Kiểm tra email nếu được cung cấp\r\n  if (patient.email && mockUsers.some(user => user.email === patient.email)) {\r\n    errors.push(`Email '${patient.email}' đã tồn tại`);\r\n  }\r\n  \r\n  return errors;\r\n};\r\n\r\n// Hàm thêm bệnh nhân mới\r\nexport const addPatient = (patient: Partial<Omit<User, '_id' | 'createdAt' | 'updatedAt' | '__v'>>) => {\r\n  // Kiểm tra thông tin trùng lặp\r\n  const duplicateErrors = checkDuplicates(patient);\r\n  if (duplicateErrors.length > 0) {\r\n    throw new Error(`Không thể thêm bệnh nhân: ${duplicateErrors.join(', ')}`);\r\n  }\r\n\r\n  // Tạo ID MongoDB-like mới\r\n  const _id = generateMongoId();\r\n  const now = new Date().toISOString();\r\n  \r\n  // Tạo userId tự động nếu không được cung cấp\r\n  const userId = patient.userId || generateNextUserId();\r\n  \r\n  const newPatient: User = {\r\n    _id,\r\n    userId,\r\n    username: patient.username || `patient_${userId}`,\r\n    email: patient.email || `${userId}@example.com`,\r\n    password: patient.password || '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: patient.fullName || 'Bệnh nhân mới',\r\n    phone: patient.phone || '',\r\n    role: 'PATIENT',\r\n    createdAt: now,\r\n    updatedAt: now,\r\n    __v: 0\r\n  };\r\n  \r\n  mockUsers.push(newPatient);\r\n  return newPatient;\r\n};\r\n\r\n// Hàm cập nhật thông tin bệnh nhân\r\nexport const updatePatient = (id: string, patientData: Partial<User>) => {\r\n  const index = mockUsers.findIndex(user => user._id === id);\r\n  if (index === -1) {\r\n    return null;\r\n  }\r\n  \r\n  const currentUser = mockUsers[index];\r\n  \r\n  // Kiểm tra trùng lặp với các user khác (không phải chính user này)\r\n  const duplicateErrors = [];\r\n  \r\n  // Kiểm tra userId nếu thay đổi\r\n  if (patientData.userId && patientData.userId !== currentUser.userId) {\r\n    if (mockUsers.some(user => user.userId === patientData.userId)) {\r\n      duplicateErrors.push(`User ID '${patientData.userId}' đã tồn tại`);\r\n    }\r\n  }\r\n  \r\n  // Kiểm tra username nếu thay đổi\r\n  if (patientData.username && patientData.username !== currentUser.username) {\r\n    if (mockUsers.some(user => user.username === patientData.username)) {\r\n      duplicateErrors.push(`Username '${patientData.username}' đã tồn tại`);\r\n    }\r\n  }\r\n  \r\n  // Kiểm tra email nếu thay đổi\r\n  if (patientData.email && patientData.email !== currentUser.email) {\r\n    if (mockUsers.some(user => user.email === patientData.email)) {\r\n      duplicateErrors.push(`Email '${patientData.email}' đã tồn tại`);\r\n    }\r\n  }\r\n  \r\n  if (duplicateErrors.length > 0) {\r\n    throw new Error(`Không thể cập nhật bệnh nhân: ${duplicateErrors.join(', ')}`);\r\n  }\r\n  \r\n  // Cập nhật thông tin user\r\n  mockUsers[index] = {\r\n    ...currentUser,\r\n    ...patientData,\r\n    updatedAt: new Date().toISOString()\r\n  };\r\n  \r\n  return mockUsers[index];\r\n};\r\n\r\n// Hàm xóa bệnh nhân\r\nexport const deletePatient = (id: string) => {\r\n  const index = mockUsers.findIndex(user => user._id === id);\r\n  if (index !== -1) {\r\n    const deletedPatient = mockUsers[index];\r\n    mockUsers.splice(index, 1);\r\n    return deletedPatient;\r\n  }\r\n  return null;\r\n};\r\n\r\n// Hàm thêm queue mới\r\nexport const addQueue = (patientId: string, status: 'waiting' | 'in_progress' | 'completed' | 'canceled' = 'waiting') => {\r\n  // Kiểm tra xem patientId có tồn tại và là bệnh nhân không\r\n  const patient = getUserById(patientId);\r\n  if (!patient || patient.role !== 'PATIENT') {\r\n    console.error('Invalid patient ID or user is not a patient');\r\n    return null;\r\n  }\r\n\r\n  // Kiểm tra xem bệnh nhân đã có trong queue chưa\r\n  const existingQueue = getQueueByPatientId(patientId);\r\n  if (existingQueue) {\r\n    console.warn('Patient already in queue');\r\n    return existingQueue;\r\n  }\r\n\r\n  // Tạo queue mới\r\n  const newQueue: Queue = {\r\n    _id: `queue_${Date.now()}`,\r\n    patient: patientId,\r\n    status: status,\r\n    createdAt: new Date().toISOString(),\r\n    updatedAt: new Date().toISOString(),\r\n    __v: 0\r\n  };\r\n\r\n  mockQueues.push(newQueue);\r\n  return newQueue;\r\n};\r\n\r\n// Interface mở rộng Queue để thêm thông tin bác sĩ\r\ninterface QueueWithDoctor extends Queue {\r\n  doctorId?: string;\r\n}\r\n\r\n// Hàm cập nhật trạng thái queue và có thể thêm bác sĩ nếu cần\r\nexport const updateQueueStatus = (\r\n  queueId: string, \r\n  status: 'waiting' | 'in_progress' | 'completed' | 'canceled', \r\n  doctorId?: string\r\n) => {\r\n  const index = mockQueues.findIndex(queue => queue._id === queueId);\r\n  if (index !== -1) {\r\n    const updatedQueue: QueueWithDoctor = {\r\n      ...mockQueues[index],\r\n      status: status,\r\n      updatedAt: new Date().toISOString()\r\n    };\r\n    \r\n    // Nếu có doctorId và queue chuyển sang trạng thái in_progress, lưu doctorId vào queue\r\n    if (doctorId && status === 'in_progress') {\r\n      updatedQueue.doctorId = doctorId;\r\n    }\r\n    \r\n    mockQueues[index] = updatedQueue as Queue;\r\n    return mockQueues[index];\r\n  }\r\n  return null;\r\n};\r\n\r\n// Hàm xóa queue\r\nexport const deleteQueue = (queueId: string) => {\r\n  const index = mockQueues.findIndex(queue => queue._id === queueId);\r\n  if (index !== -1) {\r\n    const deletedQueue = mockQueues[index];\r\n    mockQueues.splice(index, 1);\r\n    return deletedQueue;\r\n  }\r\n  return null;\r\n};\r\n\r\n// Hàm lấy danh sách bệnh nhân đang chờ khám\r\nexport const getWaitingPatients = () => {\r\n  const waitingQueues = getQueuesByStatus('waiting');\r\n  return waitingQueues.map(queue => {\r\n    const patient = getUserById(queue.patient);\r\n    return {\r\n      queueInfo: queue,\r\n      patientInfo: patient || null\r\n    };\r\n  });\r\n};\r\n\r\n// Hàm lấy tất cả queue kèm thông tin bệnh nhân\r\nexport const getAllQueuesWithPatientInfo = () => {\r\n  return mockQueues.map(queue => {\r\n    const patient = getUserById(queue.patient);\r\n    return {\r\n      ...queue,\r\n      patientInfo: patient || null\r\n    };\r\n  });\r\n};\r\n"],"names":[],"mappings":"AAAA,0CAA0C;AAE1C,yBAAyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyElB,MAAM,YAAoB;IAC/B;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;CACD;AAGM,MAAM,aAAsB;IACjC;QACE,KAAK;QACL,SAAS;QACT,QAAQ;QACR,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,SAAS;QACT,QAAQ;QACR,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,SAAS;QACT,QAAQ;QACR,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,SAAS;QACT,QAAQ;QACR,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,SAAS;QACT,QAAQ;QACR,WAAW;QACX,WAAW;QACX,KAAK;IACP;CACD;AAGM,MAAM,gBAA4B;IACvC;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;CACD;AAGM,MAAM,oBAAoC;IAC/C;QACE,KAAK;QACL,sBAAsB;QACtB,WAAW;QACX,UAAU;QACV,WAAW;QACX,MAAM;QACN,QAAQ;QACR,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,sBAAsB;QACtB,WAAW;QACX,UAAU;QACV,WAAW;QACX,MAAM;QACN,QAAQ;QACR,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,sBAAsB;QACtB,WAAW;QACX,UAAU;QACV,WAAW;QACX,MAAM;QACN,QAAQ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","debugId":null}},
    {"offset": {"line": 2930, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/pharmacyPage/Statistics.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { CalendarIcon, SearchIcon, ChevronDownIcon } from 'lucide-react';\r\nimport { InvoiceDetailModal } from './InvoiceDetailModal';\r\nimport { getPharmacyInvoices, getDailyRevenue, PharmacyInvoice, PharmacyPatient } from './pharmacyUtils';\r\nimport { getUserById } from '../datats/mockPatients';\r\nexport const Statistics = () => {\r\n  const [selectedPeriod, setSelectedPeriod] = useState('day');\r\n  const [showDetails, setShowDetails] = useState(false);\r\n  const [selectedDate, setSelectedDate] = useState('2025-06-29');\r\n  const [selectedInvoice, setSelectedInvoice] = useState<{\r\n    invoice: PharmacyInvoice;\r\n    patient: PharmacyPatient;\r\n  } | null>(null);\r\n  const [revenueData, setRevenueData] = useState<{date: string, amount: number}[]>([]);\r\n  const [invoicesData, setInvoicesData] = useState<PharmacyInvoice[]>([]);\r\n  \r\n  // Tải dữ liệu doanh thu và hóa đơn từ mockPatients\r\n  useEffect(() => {\r\n    setRevenueData(getDailyRevenue());\r\n    setInvoicesData(getPharmacyInvoices());\r\n  }, []);\r\n  \r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('vi-VN');\r\n  };\r\n  \r\n  const getTotalRevenue = () => {\r\n    return revenueData.find(item => item.date === selectedDate)?.amount || 0;\r\n  };\r\n  \r\n  const getInvoicesForDate = () => {\r\n    return invoicesData.filter(invoice => {\r\n      // Lấy phần ngày từ định dạng ISO\r\n      const invoiceDate = new Date(invoice.date).toISOString().split('T')[0];\r\n      return invoiceDate === selectedDate;\r\n    });\r\n  };\r\n  \r\n  const getPatientById = (id: string): PharmacyPatient | null => {\r\n    const user = getUserById(id);\r\n    if (!user) return null;\r\n    \r\n    // Convert User to PharmacyPatient format\r\n    return {\r\n      id: user._id,\r\n      serialNumber: 'P' + user.userId,\r\n      fullName: user.fullName,\r\n      phone: user.phone,\r\n      prescription: [], // Mảng rỗng vì chúng ta không cần hiển thị đơn thuốc ở đây\r\n      diagnosis: '',\r\n      doctor: ''\r\n    };\r\n  };\r\n  return <div className=\"space-y-6\">\r\n      <div className=\"bg-white shadow rounded-lg overflow-hidden\">\r\n        <div className=\"bg-blue-600 px-4 py-3\">\r\n          <h2 className=\"text-lg font-medium text-white\">\r\n            Xem Thống Kê Doanh Thu\r\n          </h2>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          <div className=\"flex flex-wrap items-center gap-5 mb-6\">\r\n     \r\n            <div>\r\n              <label htmlFor=\"date\" className=\"block text-sm font-medium text-black mb-2\">\r\n                Chọn ngày\r\n              </label>\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <CalendarIcon size={18} className=\"text-black\" />\r\n                </div>\r\n                <input \r\n                  type=\"date\" \r\n                  id=\"date\" \r\n                  value={selectedDate} \r\n                  onChange={e => setSelectedDate(e.target.value)} \r\n                  className=\"pl-10 pr-4 py-2.5 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-2 focus:ring-black focus:border-black text-black border\" \r\n                />\r\n              </div>\r\n            </div>\r\n          \r\n            <div className=\"flex-grow\"></div>\r\n            <div className=\"flex items-end\">\r\n              <button onClick={() => setShowDetails(!showDetails)} className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\">\r\n                <SearchIcon className=\"h-4 w-4 mr-1\" /> Xem chi tiết\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-blue-50 rounded-lg p-6 mb-6\">\r\n            <h3 className=\"text-lg font-medium text-blue-800 mb-2\">\r\n              Tổng doanh thu\r\n            </h3>\r\n            <div className=\"flex items-baseline\">\r\n              <span className=\"text-3xl font-bold text-blue-600\">\r\n                {getTotalRevenue().toLocaleString('vi-VN')} đ\r\n              </span>\r\n              <span className=\"ml-2 text-sm text-gray-500\">\r\n                Ngày {formatDate(selectedDate)}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          {showDetails && <div>\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\r\n                Chi tiết hóa đơn\r\n              </h3>\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full divide-y divide-gray-200\">\r\n                  <thead className=\"bg-gray-50\">\r\n                    <tr>\r\n                      <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Mã hóa đơn\r\n                      </th>\r\n                      <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Tên bệnh nhân\r\n                      </th>\r\n                      <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Nhân viên phát thuốc\r\n                      </th>\r\n                      <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Tổng tiền\r\n                      </th>\r\n                      <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Thao tác\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                    {getInvoicesForDate().map(invoice => {\r\n                  const patient = getPatientById(invoice.patientId);\r\n                  return <tr key={invoice.id}>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600\">\r\n                            #{invoice.id}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                            {patient?.fullName || 'N/A'}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                            {invoice.pharmacistName}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                            {invoice.totalAmount.toLocaleString('vi-VN')} đ\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                            <button onClick={() => {\r\n                        const patient = getPatientById(invoice.patientId);\r\n                        if (patient) {\r\n                          setSelectedInvoice({\r\n                            invoice,\r\n                            patient\r\n                          });\r\n                        }\r\n                      }} className=\"text-blue-600 hover:text-blue-800\">\r\n                              Xem chi tiết\r\n                            </button>\r\n                          </td>\r\n                        </tr>;\r\n                })}\r\n                    {getInvoicesForDate().length === 0 && <tr>\r\n                        <td colSpan={5} className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center\">\r\n                          Không có hóa đơn nào cho ngày đã chọn.\r\n                        </td>\r\n                      </tr>}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>}\r\n        </div>\r\n      </div>\r\n      {selectedInvoice && <InvoiceDetailModal invoice={selectedInvoice.invoice} patient={selectedInvoice.patient} onClose={() => setSelectedInvoice(null)} />}\r\n    </div>;\r\n};"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;AACO,MAAM,aAAa;;IACxB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAG3C;IACV,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAoC,EAAE;IACnF,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAqB,EAAE;IAEtE,mDAAmD;IACnD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;gCAAE;YACR,eAAe,CAAA,GAAA,8IAAA,CAAA,kBAAe,AAAD;YAC7B,gBAAgB,CAAA,GAAA,8IAAA,CAAA,sBAAmB,AAAD;QACpC;+BAAG,EAAE;IAEL,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,IAAI,KAAK;QACtB,OAAO,KAAK,kBAAkB,CAAC;IACjC;IAEA,MAAM,kBAAkB;QACtB,OAAO,YAAY,IAAI,CAAC,CAAA,OAAQ,KAAK,IAAI,KAAK,eAAe,UAAU;IACzE;IAEA,MAAM,qBAAqB;QACzB,OAAO,aAAa,MAAM,CAAC,CAAA;YACzB,iCAAiC;YACjC,MAAM,cAAc,IAAI,KAAK,QAAQ,IAAI,EAAE,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YACtE,OAAO,gBAAgB;QACzB;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,MAAM,OAAO,CAAA,GAAA,uIAAA,CAAA,cAAW,AAAD,EAAE;QACzB,IAAI,CAAC,MAAM,OAAO;QAElB,yCAAyC;QACzC,OAAO;YACL,IAAI,KAAK,GAAG;YACZ,cAAc,MAAM,KAAK,MAAM;YAC/B,UAAU,KAAK,QAAQ;YACvB,OAAO,KAAK,KAAK;YACjB,cAAc,EAAE;YAChB,WAAW;YACX,QAAQ;QACV;IACF;IACA,qBAAO,6LAAC;QAAI,WAAU;;0BAClB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAG,WAAU;sCAAiC;;;;;;;;;;;kCAIjD,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDAEb,6LAAC;;0DACC,6LAAC;gDAAM,SAAQ;gDAAO,WAAU;0DAA4C;;;;;;0DAG5E,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;kEACb,cAAA,6LAAC,iNAAA,CAAA,eAAY;4DAAC,MAAM;4DAAI,WAAU;;;;;;;;;;;kEAEpC,6LAAC;wDACC,MAAK;wDACL,IAAG;wDACH,OAAO;wDACP,UAAU,CAAA,IAAK,gBAAgB,EAAE,MAAM,CAAC,KAAK;wDAC7C,WAAU;;;;;;;;;;;;;;;;;;kDAKhB,6LAAC;wCAAI,WAAU;;;;;;kDACf,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CAAO,SAAS,IAAM,eAAe,CAAC;4CAAc,WAAU;;8DAC7D,6LAAC,6MAAA,CAAA,aAAU;oDAAC,WAAU;;;;;;gDAAiB;;;;;;;;;;;;;;;;;;0CAI7C,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDAAyC;;;;;;kDAGvD,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAK,WAAU;;oDACb,kBAAkB,cAAc,CAAC;oDAAS;;;;;;;0DAE7C,6LAAC;gDAAK,WAAU;;oDAA6B;oDACrC,WAAW;;;;;;;;;;;;;;;;;;;4BAItB,6BAAe,6LAAC;;kDACb,6LAAC;wCAAG,WAAU;kDAAyC;;;;;;kDAGvD,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CAAM,WAAU;;8DACf,6LAAC;oDAAM,WAAU;8DACf,cAAA,6LAAC;;0EACC,6LAAC;gEAAG,OAAM;gEAAM,WAAU;0EAAiF;;;;;;0EAG3G,6LAAC;gEAAG,OAAM;gEAAM,WAAU;0EAAiF;;;;;;0EAG3G,6LAAC;gEAAG,OAAM;gEAAM,WAAU;0EAAiF;;;;;;0EAG3G,6LAAC;gEAAG,OAAM;gEAAM,WAAU;0EAAiF;;;;;;0EAG3G,6LAAC;gEAAG,OAAM;gEAAM,WAAU;0EAAiF;;;;;;;;;;;;;;;;;8DAK/G,6LAAC;oDAAM,WAAU;;wDACd,qBAAqB,GAAG,CAAC,CAAA;4DAC5B,MAAM,UAAU,eAAe,QAAQ,SAAS;4DAChD,qBAAO,6LAAC;;kFACA,6LAAC;wEAAG,WAAU;;4EAAgE;4EAC1E,QAAQ,EAAE;;;;;;;kFAEd,6LAAC;wEAAG,WAAU;kFACX,SAAS,YAAY;;;;;;kFAExB,6LAAC;wEAAG,WAAU;kFACX,QAAQ,cAAc;;;;;;kFAEzB,6LAAC;wEAAG,WAAU;;4EACX,QAAQ,WAAW,CAAC,cAAc,CAAC;4EAAS;;;;;;;kFAE/C,6LAAC;wEAAG,WAAU;kFACZ,cAAA,6LAAC;4EAAO,SAAS;gFACrB,MAAM,UAAU,eAAe,QAAQ,SAAS;gFAChD,IAAI,SAAS;oFACX,mBAAmB;wFACjB;wFACA;oFACF;gFACF;4EACF;4EAAG,WAAU;sFAAoC;;;;;;;;;;;;+DAtBrC,QAAQ,EAAE;;;;;wDA2B5B;wDACK,qBAAqB,MAAM,KAAK,mBAAK,6LAAC;sEACnC,cAAA,6LAAC;gEAAG,SAAS;gEAAG,WAAU;0EAAgE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAU3G,iCAAmB,6LAAC,oJAAA,CAAA,qBAAkB;gBAAC,SAAS,gBAAgB,OAAO;gBAAE,SAAS,gBAAgB,OAAO;gBAAE,SAAS,IAAM,mBAAmB;;;;;;;;;;;;AAEpJ;GAtKa;KAAA","debugId":null}},
    {"offset": {"line": 3385, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/pharmacyPage/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { LogOutIcon, PillIcon, BarChartIcon } from 'lucide-react';\r\nimport { PatientList } from './PatientList';\r\nimport { PatientDetails } from './PatientDetails';\r\nimport { Statistics } from './Statistics';\r\nimport { getPatientsWithPendingPrescriptions, PharmacyPatient } from './pharmacyUtils';\r\nimport { User as AuthUser } from '../datats/auth';\r\n\r\n// Sử dụng kiểu User từ auth.ts\r\ninterface DashboardProps {\r\n  user: AuthUser | null; // Assuming user can be null if not logged in\r\n  onLogout: () => void;\r\n}\r\n\r\nexport const Dashboard = ({\r\n  user,\r\n  onLogout\r\n}: DashboardProps) => {\r\n  const [activeTab, setActiveTab] = useState('dispense'); // 'dispense' or 'statistics'\r\n  const [selectedPatient, setSelectedPatient] = useState<PharmacyPatient | null>(null);\r\n  const [waitingPatients, setWaitingPatients] = useState<PharmacyPatient[]>([]);\r\n\r\n  // Tải dữ liệu bệnh nhân chờ phát thuốc từ API\r\n  useEffect(() => {\r\n    const fetchPatients = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token') || '';\r\n        const patients = await getPatientsWithPendingPrescriptions(token);\r\n        setWaitingPatients(patients);\r\n      } catch (error) {\r\n        console.error(\"Error fetching patients:\", error);\r\n      }\r\n    };\r\n    \r\n    fetchPatients();\r\n  }, []);\r\n\r\n  const handlePatientSelect = (patient: PharmacyPatient) => {\r\n    setSelectedPatient(patient);\r\n  };\r\n\r\n  const handlePatientRemove = (patientId: string) => {\r\n    setWaitingPatients(waitingPatients.filter(p => p.id !== patientId));\r\n    setSelectedPatient(null);\r\n  };\r\n\r\n  return <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Header */}\r\n      <header className=\"bg-blue-700 text-white shadow\">\r\n        <div className=\"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8 flex justify-between items-center\">\r\n          <h1 className=\"text-2xl font-bold\">Hệ Thống Quản Lý Nhà Thuốc</h1>\r\n          <div className=\"flex items-center space-x-4\">\r\n            <span className=\"text-sm\">\r\n              Xin chào, {user?.fullName || 'Nhân viên'}\r\n            </span>\r\n            <button onClick={onLogout} className=\"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-blue-800 hover:bg-blue-900 focus:outline-none focus:border-blue-900 focus:shadow-outline-blue active:bg-blue-900 transition duration-150 ease-in-out\">\r\n              <LogOutIcon className=\"h-4 w-4 mr-1\" /> Đăng Xuất\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </header>\r\n      {/* Navigation */}\r\n      <nav className=\"bg-white shadow\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex justify-center h-16\">\r\n            <div className=\"flex space-x-8\">\r\n              <button onClick={() => {\r\n              setActiveTab('dispense');\r\n              setSelectedPatient(null);\r\n            }} className={`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium leading-5 focus:outline-none transition duration-150 ease-in-out ${activeTab === 'dispense' ? 'border-blue-500 text-gray-900' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`}>\r\n                <PillIcon className=\"h-5 w-5 mr-1\" /> Phát Thuốc\r\n              </button>\r\n              <button onClick={() => {\r\n              setActiveTab('statistics');\r\n              setSelectedPatient(null);\r\n            }} className={`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium leading-5 focus:outline-none transition duration-150 ease-in-out ${activeTab === 'statistics' ? 'border-blue-500 text-gray-900' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`}>\r\n                <BarChartIcon className=\"h-5 w-5 mr-1\" /> Xem Thống Kê Doanh Thu\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n      {/* Main Content */}\r\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n        {activeTab === 'dispense' ? <div className=\"flex flex-col md:flex-row gap-6\">\r\n            <div className=\"w-full md:w-1/3\">\r\n              <PatientList patients={waitingPatients} onPatientSelect={handlePatientSelect} />\r\n            </div>\r\n            <div className=\"w-full md:w-2/3\">\r\n              {selectedPatient ? <PatientDetails patient={selectedPatient} onPatientComplete={handlePatientRemove} /> : <div className=\"bg-white shadow rounded-lg p-6 h-96 flex items-center justify-center\">\r\n                  <p className=\"text-gray-500 text-center\">\r\n                    Vui lòng chọn bệnh nhân từ danh sách để xem chi tiết.\r\n                  </p>\r\n                </div>}\r\n            </div>\r\n          </div> : <Statistics />}\r\n      </main>\r\n      {/* Footer */}\r\n      <footer className=\"bg-white border-t border-gray-200 py-4\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <p className=\"text-center text-sm text-gray-500\">\r\n            © 2023 Hệ Thống Quản Lý Nhà Thuốc. Bản quyền thuộc về Phòng Khám.\r\n          </p>\r\n        </div>\r\n      </footer>\r\n    </div>;\r\n};"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;AASO,MAAM,YAAY,CAAC,EACxB,IAAI,EACJ,QAAQ,EACO;;IACf,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,aAAa,6BAA6B;IACrF,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAA0B;IAC/E,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAqB,EAAE;IAE5E,8CAA8C;IAC9C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACR,MAAM;qDAAgB;oBACpB,IAAI;wBACF,MAAM,QAAQ,aAAa,OAAO,CAAC,YAAY;wBAC/C,MAAM,WAAW,MAAM,CAAA,GAAA,8IAAA,CAAA,sCAAmC,AAAD,EAAE;wBAC3D,mBAAmB;oBACrB,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,4BAA4B;oBAC5C;gBACF;;YAEA;QACF;8BAAG,EAAE;IAEL,MAAM,sBAAsB,CAAC;QAC3B,mBAAmB;IACrB;IAEA,MAAM,sBAAsB,CAAC;QAC3B,mBAAmB,gBAAgB,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACxD,mBAAmB;IACrB;IAEA,qBAAO,6LAAC;QAAI,WAAU;;0BAElB,6LAAC;gBAAO,WAAU;0BAChB,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAqB;;;;;;sCACnC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAK,WAAU;;wCAAU;wCACb,MAAM,YAAY;;;;;;;8CAE/B,6LAAC;oCAAO,SAAS;oCAAU,WAAU;;sDACnC,6LAAC,iNAAA,CAAA,aAAU;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;;;;;;;;;;;;;;;;;;0BAM/C,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAO,SAAS;wCACjB,aAAa;wCACb,mBAAmB;oCACrB;oCAAG,WAAW,CAAC,mIAAmI,EAAE,cAAc,aAAa,kCAAkC,8EAA8E;;sDAC3R,6LAAC,yMAAA,CAAA,WAAQ;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;8CAEvC,6LAAC;oCAAO,SAAS;wCACjB,aAAa;wCACb,mBAAmB;oCACrB;oCAAG,WAAW,CAAC,mIAAmI,EAAE,cAAc,eAAe,kCAAkC,8EAA8E;;sDAC7R,6LAAC,oPAAA,CAAA,eAAY;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAOnD,6LAAC;gBAAK,WAAU;0BACb,cAAc,2BAAa,6LAAC;oBAAI,WAAU;;sCACvC,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,6IAAA,CAAA,cAAW;gCAAC,UAAU;gCAAiB,iBAAiB;;;;;;;;;;;sCAE3D,6LAAC;4BAAI,WAAU;sCACZ,gCAAkB,6LAAC,gJAAA,CAAA,iBAAc;gCAAC,SAAS;gCAAiB,mBAAmB;;;;;qDAA0B,6LAAC;gCAAI,WAAU;0CACrH,cAAA,6LAAC;oCAAE,WAAU;8CAA4B;;;;;;;;;;;;;;;;;;;;;yCAKxC,6LAAC,4IAAA,CAAA,aAAU;;;;;;;;;;0BAGxB,6LAAC;gBAAO,WAAU;0BAChB,cAAA,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAE,WAAU;kCAAoC;;;;;;;;;;;;;;;;;;;;;;AAM3D;GA5Fa;KAAA","debugId":null}},
    {"offset": {"line": 3677, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/pharmacyPage/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Dashboard } from './Dashboard';\r\n\r\nexport default function PharmacyPage() {\r\n  const { user, isAuthenticated, logout } = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      router.push('/login');\r\n    } else if (user?.role !== 'PHARMACIST') {\r\n      // Nếu người dùng không phải là dược sĩ, chuyển hướng về trang đăng nhập\r\n      logout();\r\n      router.push('/login');\r\n    }\r\n  }, [isAuthenticated, router, user, logout]);\r\n\r\n  if (!isAuthenticated || !user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col w-full min-h-screen bg-gray-50\">\r\n      <Dashboard user={user} onLogout={logout} />\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,eAAe,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,UAAO,AAAD;IAChD,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,IAAI,CAAC,iBAAiB;gBACpB,OAAO,IAAI,CAAC;YACd,OAAO,IAAI,MAAM,SAAS,cAAc;gBACtC,wEAAwE;gBACxE;gBACA,OAAO,IAAI,CAAC;YACd;QACF;iCAAG;QAAC;QAAiB;QAAQ;QAAM;KAAO;IAE1C,IAAI,CAAC,mBAAmB,CAAC,MAAM;QAC7B,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC,2IAAA,CAAA,YAAS;YAAC,MAAM;YAAM,UAAU;;;;;;;;;;;AAGvC;GA3BwB;;QACoB,wIAAA,CAAA,UAAO;QAClC,qIAAA,CAAA,YAAS;;;KAFF","debugId":null}}]
}