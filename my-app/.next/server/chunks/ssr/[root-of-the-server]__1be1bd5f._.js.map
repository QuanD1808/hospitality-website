{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/receptionistPage/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { UsersIcon, ClockIcon, CheckSquareIcon, CalendarIcon, UserIcon, LogOutIcon } from 'lucide-react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { \r\n  getAllPatients, \r\n  getQueuesByStatus,\r\n  mockQueues,\r\n  Queue\r\n} from '../datats/mockPatients';\r\n\r\ninterface DashboardProps {\r\n  onNavigate: (view: string) => void;\r\n}\r\n\r\nexport function Dashboard({ onNavigate }: DashboardProps) {\r\n  const { user, logout } = useAuth();\r\n  const [showAppointmentForm, setShowAppointmentForm] = useState(false);\r\n\r\n  const stats = [\r\n    {\r\n      title: 'Lịch hẹn hôm nay',\r\n      value: '24',\r\n      icon: <CalendarIcon className=\"h-6 w-6 text-blue-600\" />,\r\n      change: '+2',\r\n      changeType: 'increase'\r\n    },\r\n    {\r\n      title: 'Đang chờ khám',\r\n      value: '12',\r\n      icon: <ClockIcon className=\"h-6 w-6 text-yellow-600\" />,\r\n      change: '3 mới',\r\n      changeType: 'neutral'\r\n    },\r\n    {\r\n      title: 'Hoàn thành hôm nay',\r\n      value: '18',\r\n      icon: <CheckSquareIcon className=\"h-6 w-6 text-green-600\" />,\r\n      change: '75%',\r\n      changeType: 'increase'\r\n    },\r\n    {\r\n      title: 'Tổng bệnh nhân',\r\n      value: '1,234',\r\n      icon: <UsersIcon className=\"h-6 w-6 text-purple-600\" />,\r\n      change: '+5.2%',\r\n      changeType: 'increase'\r\n    }\r\n  ];\r\n\r\n  const appointments = [\r\n    { id: 1, patient: 'Nguyễn Văn A', time: '9:00 AM', doctor: 'Dr. Nguyễn Thị Hương', department: 'Nội khoa', status: 'Đang chờ' },\r\n    { id: 2, patient: 'Trần Văn B', time: '9:30 AM', doctor: 'Dr. Lê Minh Tuấn', department: 'Tim mạch', status: 'Đang khám' },\r\n    { id: 3, patient: 'Phạm Thị C', time: '10:00 AM', doctor: 'Dr. Trần Thị Mai', department: 'Da liễu', status: 'Đặt trước' },\r\n    { id: 4, patient: 'Hoàng Văn D', time: '10:30 AM', doctor: 'Dr. Nguyễn Thị Hương', department: 'Nội khoa', status: 'Đặt trước' },\r\n    { id: 5, patient: 'Lê Thị E', time: '11:00 AM', doctor: 'Dr. Phạm Văn Nam', department: 'Nhãn khoa', status: 'Đặt trước' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Header */}\r\n      <header className=\"bg-white shadow\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center py-4\">\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">Hệ thống Lễ tân MediClinic</h1>\r\n          <div className=\"flex items-center\">\r\n            <div className=\"mr-4 text-right\">\r\n              <p className=\"text-sm font-medium text-gray-900\">{user?.fullName || 'Người dùng'}</p>\r\n              <p className=\"text-xs text-gray-500\">Lễ tân</p>\r\n            </div>\r\n            <div className=\"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center\">\r\n              <UserIcon className=\"h-5 w-5 text-gray-600\" />\r\n            </div>\r\n            <button \r\n              onClick={logout}\r\n              className=\"ml-4 p-2 rounded-full text-gray-500 hover:bg-gray-100\"\r\n              title=\"Đăng xuất\"\r\n            >\r\n              <LogOutIcon size={20} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n        {/* Stats Cards */}\r\n        <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-6\">\r\n          {stats.map((stat, index) => (\r\n            <div key={index} className=\"bg-white overflow-hidden shadow rounded-lg\">\r\n              <div className=\"p-5\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"flex-shrink-0\">{stat.icon}</div>\r\n                  <div className=\"ml-5 w-0 flex-1\">\r\n                    <dl>\r\n                      <dt className=\"text-sm font-medium text-gray-500 truncate\">{stat.title}</dt>\r\n                      <dd>\r\n                        <div className=\"text-lg font-medium text-gray-900\">{stat.value}</div>\r\n                      </dd>\r\n                    </dl>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"bg-gray-50 px-5 py-3\">\r\n                <div className=\"text-sm\">\r\n                  <span className={`font-medium ${\r\n                    stat.changeType === 'increase' ? 'text-green-600' : \r\n                    stat.changeType === 'decrease' ? 'text-red-600' : 'text-gray-500'\r\n                  }`}>\r\n                    {stat.change}\r\n                  </span>\r\n                  <span className=\"text-gray-500\"> so với hôm qua</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Appointments Today */}\r\n        <div className=\"bg-white shadow rounded-lg mb-6\">\r\n          <div className=\"px-4 py-5 sm:px-6 flex justify-between items-center\">\r\n            <div>\r\n              <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Lịch hẹn hôm nay</h3>\r\n              <p className=\"mt-1 text-sm text-gray-500\">Danh sách bệnh nhân có lịch hẹn hôm nay</p>\r\n            </div>\r\n            <div>\r\n              <button \r\n                onClick={() => setShowAppointmentForm(true)}\r\n                className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n              >\r\n                Thêm lịch hẹn mới\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className=\"border-t border-gray-200\">\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Bệnh nhân\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Giờ hẹn\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Bác sĩ\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Khoa\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Trạng thái\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Hành động\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {appointments.map((appointment) => (\r\n                    <tr key={appointment.id}>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm font-medium text-gray-900\">{appointment.patient}</div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm text-gray-500\">{appointment.time}</div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm text-gray-900\">{appointment.doctor}</div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm text-gray-500\">{appointment.department}</div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\r\n                          appointment.status === 'Đang chờ' ? 'bg-yellow-100 text-yellow-800' : \r\n                          appointment.status === 'Đang khám' ? 'bg-blue-100 text-blue-800' : \r\n                          'bg-gray-100 text-gray-800'\r\n                        }`}>\r\n                          {appointment.status}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                        <button className=\"text-blue-600 hover:text-blue-900 mr-2\">Check-in</button>\r\n                        <button className=\"text-red-600 hover:text-red-900\">Hủy</button>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Quick Actions */}\r\n        <div className=\"bg-white shadow rounded-lg\">\r\n          <div className=\"px-4 py-5 sm:px-6\">\r\n            <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Thao tác nhanh</h3>\r\n          </div>\r\n          <div className=\"border-t border-gray-200\">\r\n            <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 p-6\">\r\n              {/* Card 1 - Patient Management */}\r\n              <div \r\n                className=\"relative rounded-lg border border-gray-300 bg-white px-6 py-5 shadow-sm flex items-center space-x-3 hover:border-gray-400 cursor-pointer\"\r\n                onClick={() => onNavigate('PatientManagement')}\r\n              >\r\n                <div className=\"flex-shrink-0 bg-blue-100 rounded-md p-2\">\r\n                  <UsersIcon className=\"h-6 w-6 text-blue-600\" />\r\n                </div>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"text-sm font-medium text-gray-900\">Quản lý bệnh nhân</p>\r\n                  <p className=\"text-sm text-gray-500\">Xem và quản lý thông tin bệnh nhân</p>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Card 2 - Queue Management */}\r\n              <div \r\n                className=\"relative rounded-lg border border-gray-300 bg-white px-6 py-5 shadow-sm flex items-center space-x-3 hover:border-gray-400 cursor-pointer\"\r\n                onClick={() => onNavigate('QueueManagement')}\r\n              >\r\n                <div className=\"flex-shrink-0 bg-green-100 rounded-md p-2\">\r\n                  <CalendarIcon className=\"h-6 w-6 text-green-600\" />\r\n                </div>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"text-sm font-medium text-gray-900\">Quản lý lịch hẹn</p>\r\n                  <p className=\"text-sm text-gray-500\">Thêm và chỉnh sửa lịch hẹn</p>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Card 3 - Medication History */}\r\n              <div \r\n                className=\"relative rounded-lg border border-gray-300 bg-white px-6 py-5 shadow-sm flex items-center space-x-3 hover:border-gray-400 cursor-pointer\"\r\n                onClick={() => onNavigate('MedicationHistory')}\r\n              >\r\n                <div className=\"flex-shrink-0 bg-purple-100 rounded-md p-2\">\r\n                  <ClockIcon className=\"h-6 w-6 text-purple-600\" />\r\n                </div>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"text-sm font-medium text-gray-900\">Báo cáo</p>\r\n                  <p className=\"text-sm text-gray-500\">Xem báo cáo hoạt động</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n      \r\n      {/* Modal form đặt lịch hẹn */}\r\n      {showAppointmentForm && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n            <AppointmentForm onClose={() => setShowAppointmentForm(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 834, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/datats/mockPatients.ts"],"sourcesContent":["// Mock database dựa trên cấu trúc MongoDB\r\n\r\n// Khai báo các interface\r\nexport interface User {\r\n  _id: string;\r\n  userId: string;\r\n  username: string;\r\n  email: string;\r\n  password: string;\r\n  fullName: string;\r\n  phone: string;\r\n  role: 'PATIENT' | 'DOCTOR' | 'PHARMACIST' | 'RECEPTIONIST' | 'ADMIN';\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  __v: number;\r\n}\r\n\r\nexport interface Queue {\r\n  _id: string;\r\n  patient: string; // ObjectId của bệnh nhân\r\n  status: 'waiting' | 'in_progress' | 'completed' | 'canceled';\r\n  doctorId?: string; // ObjectId của bác sĩ được chỉ định (nếu có)\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  __v: number;\r\n}\r\n\r\nexport interface Prescription {\r\n  _id: string;\r\n  customPrescriptionId: string;\r\n  patientId: string; // ObjectId\r\n  doctorId: string; // ObjectId\r\n  diagnosis: string;\r\n  date: string;\r\n  status: 'PENDING_DISPENSE' | 'DISPENSED' | 'CANCELED';\r\n  __v: number;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface PrescriptionDetail {\r\n  _id: string;\r\n  customPrescriptionDetailId: string;\r\n  prescriptionId: string; // ObjectId\r\n  medicineId: string; // ObjectId\r\n  quantity: number;\r\n  dosage: string;\r\n  __v: number;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface Medicine {\r\n  _id: string;\r\n  customMedicineId: string;\r\n  name: string;\r\n  totalPills: number;\r\n  price: number;\r\n  __v: number;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface Invoice {\r\n  _id: string;\r\n  prescriptionId: string; // ObjectId\r\n  patientId: string; // ObjectId\r\n  totalAmount: number;\r\n  status: 'PAID' | 'UNPAID';\r\n  __v: number;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\n// Mock data - Users (Patients, Doctors, etc.)\r\nexport const mockUsers: User[] = [\r\n  {\r\n    _id: '685face13fc4c04e1bd96c06',\r\n    userId: 'u1',\r\n    username: 'nguyen.an',\r\n    email: 'an.nguyen@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Nguyễn Văn An',\r\n    phone: '0901234567',\r\n    role: 'PATIENT',\r\n    createdAt: '2025-06-28T08:50:41.269+00:00',\r\n    updatedAt: '2025-06-28T08:50:41.269+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c07',\r\n    userId: 'u2',\r\n    username: 'tran.binh',\r\n    email: 'binh.tran@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Trần Văn Bình',\r\n    phone: '0912345678',\r\n    role: 'PATIENT',\r\n    createdAt: '2025-06-28T09:15:22.123+00:00',\r\n    updatedAt: '2025-06-28T09:15:22.123+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c08',\r\n    userId: 'd1',\r\n    username: 'dr.hoa',\r\n    email: 'hoa.doctor@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Bác sĩ Trần Thị Hoa',\r\n    phone: '0923456789',\r\n    role: 'DOCTOR',\r\n    createdAt: '2025-06-28T10:05:17.456+00:00',\r\n    updatedAt: '2025-06-28T10:05:17.456+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c09',\r\n    userId: 'u3',\r\n    username: 'le.chi',\r\n    email: 'chi.le@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Lê Thị Chi',\r\n    phone: '0934567890',\r\n    role: 'PATIENT',\r\n    createdAt: '2025-06-28T11:30:45.789+00:00',\r\n    updatedAt: '2025-06-28T11:30:45.789+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c0a',\r\n    userId: 'p1',\r\n    username: 'pham.dung',\r\n    email: 'dung.pham@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Phạm Văn Dũng',\r\n    phone: '0945678901',\r\n    role: 'PHARMACIST',\r\n    createdAt: '2025-06-28T12:45:33.012+00:00',\r\n    updatedAt: '2025-06-28T12:45:33.012+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c0b',\r\n    userId: 'r1',\r\n    username: 'receptionist.minh',\r\n    email: 'minh.receptionist@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Nguyễn Thị Minh',\r\n    phone: '0956789012',\r\n    role: 'RECEPTIONIST',\r\n    createdAt: '2025-06-28T14:20:10.345+00:00',\r\n    updatedAt: '2025-06-28T14:20:10.345+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c0c',\r\n    userId: 'a1',\r\n    username: 'admin.tuan',\r\n    email: 'tuan.admin@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Lê Minh Tuấn',\r\n    phone: '0967890123',\r\n    role: 'ADMIN',\r\n    createdAt: '2025-06-28T15:55:27.678+00:00',\r\n    updatedAt: '2025-06-28T15:55:27.678+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c0d',\r\n    userId: 'u4',\r\n    username: 'hoang.em',\r\n    email: 'em.hoang@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Hoàng Thị Em',\r\n    phone: '0978901234',\r\n    role: 'PATIENT',\r\n    createdAt: '2025-06-28T16:30:50.901+00:00',\r\n    updatedAt: '2025-06-28T16:30:50.901+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c0e',\r\n    userId: 'u5',\r\n    username: 'nguyen.khang',\r\n    email: 'khang.nguyen@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Nguyễn Minh Khang',\r\n    phone: '0989012345',\r\n    role: 'PATIENT',\r\n    createdAt: '2025-06-28T17:15:42.234+00:00',\r\n    updatedAt: '2025-06-28T17:15:42.234+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c0f',\r\n    userId: 'd2',\r\n    username: 'dr.trang',\r\n    email: 'trang.doctor@mediclinic.com',\r\n    password: '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: 'Bác sĩ Lê Thị Trang',\r\n    phone: '0990123456',\r\n    role: 'DOCTOR',\r\n    createdAt: '2025-06-28T18:40:15.567+00:00',\r\n    updatedAt: '2025-06-28T18:40:15.567+00:00',\r\n    __v: 0\r\n  }\r\n];\r\n\r\n// Mock data - Queue\r\nexport const mockQueues: Queue[] = [\r\n  {\r\n    _id: '685f10baa8040f24f1a9014d',\r\n    patient: '685face13fc4c04e1bd96c06', // Nguyễn Văn An\r\n    status: 'waiting',\r\n    createdAt: '2025-06-27T21:44:26.099+00:00',\r\n    updatedAt: '2025-06-27T21:44:26.102+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685f10baa8040f24f1a9014e',\r\n    patient: '685face13fc4c04e1bd96c07', // Trần Văn Bình\r\n    status: 'in_progress',\r\n    createdAt: '2025-06-27T22:30:15.456+00:00',\r\n    updatedAt: '2025-06-27T22:45:20.789+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685f10baa8040f24f1a9014f',\r\n    patient: '685face13fc4c04e1bd96c09', // Lê Thị Chi\r\n    status: 'completed',\r\n    createdAt: '2025-06-27T20:15:33.222+00:00',\r\n    updatedAt: '2025-06-27T21:05:42.111+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685f10baa8040f24f1a90150',\r\n    patient: '685face13fc4c04e1bd96c0d', // Hoàng Thị Em\r\n    status: 'waiting',\r\n    createdAt: '2025-06-28T08:22:17.345+00:00',\r\n    updatedAt: '2025-06-28T08:22:17.345+00:00',\r\n    __v: 0\r\n  },\r\n  {\r\n    _id: '685f10baa8040f24f1a90151',\r\n    patient: '685face13fc4c04e1bd96c0e', // Nguyễn Minh Khang\r\n    status: 'canceled',\r\n    createdAt: '2025-06-28T07:45:10.123+00:00',\r\n    updatedAt: '2025-06-28T08:15:23.456+00:00',\r\n    __v: 0\r\n  }\r\n];\r\n\r\n// Mock data - Medicines\r\nexport const mockMedicines: Medicine[] = [\r\n  {\r\n    _id: '685face13fc4c04e1bd96c10',\r\n    customMedicineId: 'm1',\r\n    name: 'Paracetamol 500mg',\r\n    totalPills: 980,\r\n    price: 0.5,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:41.969+00:00',\r\n    updatedAt: '2025-06-28T10:57:49.516+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c11',\r\n    customMedicineId: 'm2',\r\n    name: 'Amoxicillin 500mg',\r\n    totalPills: 850,\r\n    price: 1.2,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.001+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.001+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c12',\r\n    customMedicineId: 'm3',\r\n    name: 'Ibuprofen 200mg',\r\n    totalPills: 1200,\r\n    price: 0.7,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.010+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.010+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c1a',\r\n    customMedicineId: 'm4',\r\n    name: 'Cetirizine 10mg',\r\n    totalPills: 750,\r\n    price: 0.8,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.022+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.022+00:00'\r\n  },\r\n  {\r\n    _id: '685face13fc4c04e1bd96c1b',\r\n    customMedicineId: 'm5',\r\n    name: 'Omeprazole 20mg',\r\n    totalPills: 630,\r\n    price: 1.5,\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.029+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.029+00:00'\r\n  }\r\n];\r\n\r\n// Mock data - Prescriptions\r\nexport const mockPrescriptions: Prescription[] = [\r\n  {\r\n    _id: '685face23fc4c04e1bd96c13',\r\n    customPrescriptionId: 'pr1',\r\n    patientId: '685face13fc4c04e1bd96c06', // Nguyễn Văn An\r\n    doctorId: '685face13fc4c04e1bd96c08', // Bác sĩ Trần Thị Hoa\r\n    diagnosis: 'Common Cold',\r\n    date: '2024-06-01T10:00:00.000+00:00',\r\n    status: 'PENDING_DISPENSE',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.030+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.030+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c14',\r\n    customPrescriptionId: 'pr2',\r\n    patientId: '685face13fc4c04e1bd96c07', // Trần Văn Bình\r\n    doctorId: '685face13fc4c04e1bd96c0f', // Bác sĩ Lê Thị Trang\r\n    diagnosis: 'Allergic Rhinitis',\r\n    date: '2024-06-02T11:30:00.000+00:00',\r\n    status: 'DISPENSED',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T09:30:10.123+00:00',\r\n    updatedAt: '2025-06-28T10:15:22.456+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c15',\r\n    customPrescriptionId: 'pr3',\r\n    patientId: '685face13fc4c04e1bd96c09', // Lê Thị Chi\r\n    doctorId: '685face13fc4c04e1bd96c08', // Bác sĩ Trần Thị Hoa\r\n    diagnosis: 'Gastritis',\r\n    date: '2024-06-03T14:45:00.000+00:00',\r\n    status: 'PENDING_DISPENSE',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T14:50:33.789+00:00',\r\n    updatedAt: '2025-06-28T14:50:33.789+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c1c',\r\n    customPrescriptionId: 'pr4',\r\n    patientId: '685face13fc4c04e1bd96c0d', // Hoàng Thị Em\r\n    doctorId: '685face13fc4c04e1bd96c0f', // Bác sĩ Lê Thị Trang\r\n    diagnosis: 'Migraine',\r\n    date: '2024-06-04T09:15:00.000+00:00',\r\n    status: 'CANCELED',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T09:20:45.111+00:00',\r\n    updatedAt: '2025-06-28T11:05:17.222+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c1d',\r\n    customPrescriptionId: 'pr5',\r\n    patientId: '685face13fc4c04e1bd96c0e', // Nguyễn Minh Khang\r\n    doctorId: '685face13fc4c04e1bd96c08', // Bác sĩ Trần Thị Hoa\r\n    diagnosis: 'Hypertension',\r\n    date: '2024-06-05T16:00:00.000+00:00',\r\n    status: 'DISPENSED',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T16:05:22.333+00:00',\r\n    updatedAt: '2025-06-28T17:30:14.444+00:00'\r\n  }\r\n];\r\n\r\n// Mock data - Prescription Details\r\nexport const mockPrescriptionDetails: PrescriptionDetail[] = [\r\n  {\r\n    _id: '685face23fc4c04e1bd96c16',\r\n    customPrescriptionDetailId: 'pd1',\r\n    prescriptionId: '685face23fc4c04e1bd96c13', // pr1 - Common Cold\r\n    medicineId: '685face13fc4c04e1bd96c10', // Paracetamol 500mg\r\n    quantity: 10,\r\n    dosage: '1 tablet every 6 hours',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.083+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.083+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c17',\r\n    customPrescriptionDetailId: 'pd2',\r\n    prescriptionId: '685face23fc4c04e1bd96c13', // pr1 - Common Cold\r\n    medicineId: '685face13fc4c04e1bd96c1a', // Cetirizine 10mg\r\n    quantity: 5,\r\n    dosage: '1 tablet daily before sleep',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.085+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.085+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c18',\r\n    customPrescriptionDetailId: 'pd3',\r\n    prescriptionId: '685face23fc4c04e1bd96c14', // pr2 - Allergic Rhinitis\r\n    medicineId: '685face13fc4c04e1bd96c1a', // Cetirizine 10mg\r\n    quantity: 15,\r\n    dosage: '1 tablet daily in the morning',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T09:30:10.150+00:00',\r\n    updatedAt: '2025-06-28T09:30:10.150+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c19',\r\n    customPrescriptionDetailId: 'pd4',\r\n    prescriptionId: '685face23fc4c04e1bd96c15', // pr3 - Gastritis\r\n    medicineId: '685face13fc4c04e1bd96c1b', // Omeprazole 20mg\r\n    quantity: 14,\r\n    dosage: '1 tablet daily before breakfast',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T14:50:33.800+00:00',\r\n    updatedAt: '2025-06-28T14:50:33.800+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c1e',\r\n    customPrescriptionDetailId: 'pd5',\r\n    prescriptionId: '685face23fc4c04e1bd96c1c', // pr4 - Migraine\r\n    medicineId: '685face13fc4c04e1bd96c12', // Ibuprofen 200mg\r\n    quantity: 20,\r\n    dosage: '2 tablets every 8 hours when in pain',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T09:20:45.130+00:00',\r\n    updatedAt: '2025-06-28T09:20:45.130+00:00'\r\n  },\r\n  {\r\n    _id: '685face23fc4c04e1bd96c1f',\r\n    customPrescriptionDetailId: 'pd6',\r\n    prescriptionId: '685face23fc4c04e1bd96c1d', // pr5 - Hypertension\r\n    medicineId: '685face13fc4c04e1bd96c11', // Amoxicillin 500mg\r\n    quantity: 30,\r\n    dosage: '1 tablet three times daily after meals',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T16:05:22.350+00:00',\r\n    updatedAt: '2025-06-28T16:05:22.350+00:00'\r\n  }\r\n];\r\n\r\n// Mock data - Invoices\r\nexport const mockInvoices: Invoice[] = [\r\n  {\r\n    _id: '685f6f336bd59d7487de3ce8',\r\n    prescriptionId: '685face23fc4c04e1bd96c14', // pr2\r\n    patientId: '685face13fc4c04e1bd96c07', // Trần Văn Bình\r\n    totalAmount: 12.0,\r\n    status: 'PAID',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T10:15:22.456+00:00',\r\n    updatedAt: '2025-06-28T10:15:22.456+00:00'\r\n  },\r\n  {\r\n    _id: '685f6f336bd59d7487de3ce9',\r\n    prescriptionId: '685face23fc4c04e1bd96c1d', // pr5\r\n    patientId: '685face13fc4c04e1bd96c0e', // Nguyễn Minh Khang\r\n    totalAmount: 36.0,\r\n    status: 'PAID',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T17:30:14.444+00:00',\r\n    updatedAt: '2025-06-28T17:30:14.444+00:00'\r\n  },\r\n  {\r\n    _id: '685f6f336bd59d7487de3cea',\r\n    prescriptionId: '685face23fc4c04e1bd96c13', // pr1\r\n    patientId: '685face13fc4c04e1bd96c06', // Nguyễn Văn An\r\n    totalAmount: 9.0,\r\n    status: 'UNPAID',\r\n    __v: 0,\r\n    createdAt: '2025-06-28T08:50:42.030+00:00',\r\n    updatedAt: '2025-06-28T08:50:42.030+00:00'\r\n  }\r\n];\r\n\r\n// Hàm tiện ích để làm việc với dữ liệu\r\n\r\n// Users\r\nexport const getAllUsers = () => [...mockUsers];\r\n\r\nexport const getUserById = (id: string) => {\r\n  return mockUsers.find(user => user._id === id);\r\n};\r\n\r\nexport const getUsersByRole = (role: string) => {\r\n  return mockUsers.filter(user => user.role === role);\r\n};\r\n\r\nexport const searchUsers = (searchTerm: string) => {\r\n  const term = searchTerm.toLowerCase();\r\n  return mockUsers.filter(user => \r\n    user.fullName.toLowerCase().includes(term) || \r\n    user.username.toLowerCase().includes(term) ||\r\n    user.email.toLowerCase().includes(term) ||\r\n    user.phone.includes(term) ||\r\n    user.userId.includes(term)\r\n  );\r\n};\r\n\r\n// Queues\r\nexport const getAllQueues = () => [...mockQueues];\r\n\r\nexport const getQueuesByStatus = (status: string) => {\r\n  return mockQueues.filter(queue => queue.status === status);\r\n};\r\n\r\nexport const getQueueByPatientId = (patientId: string) => {\r\n  return mockQueues.find(queue => queue.patient === patientId);\r\n};\r\n\r\n// Medicines\r\nexport const getAllMedicines = () => [...mockMedicines];\r\n\r\nexport const getMedicineById = (id: string) => {\r\n  return mockMedicines.find(medicine => medicine._id === id);\r\n};\r\n\r\nexport const searchMedicines = (searchTerm: string) => {\r\n  const term = searchTerm.toLowerCase();\r\n  return mockMedicines.filter(medicine => \r\n    medicine.name.toLowerCase().includes(term) || \r\n    medicine.customMedicineId.includes(term)\r\n  );\r\n};\r\n\r\n// Prescriptions\r\nexport const getAllPrescriptions = () => [...mockPrescriptions];\r\n\r\nexport const getPrescriptionById = (id: string) => {\r\n  return mockPrescriptions.find(prescription => prescription._id === id);\r\n};\r\n\r\nexport const getPrescriptionsByPatientId = (patientId: string) => {\r\n  return mockPrescriptions.filter(prescription => prescription.patientId === patientId);\r\n};\r\n\r\nexport const getPrescriptionsByDoctorId = (doctorId: string) => {\r\n  return mockPrescriptions.filter(prescription => prescription.doctorId === doctorId);\r\n};\r\n\r\nexport const getPrescriptionsByStatus = (status: string) => {\r\n  return mockPrescriptions.filter(prescription => prescription.status === status);\r\n};\r\n\r\n// Prescription Details\r\nexport const getAllPrescriptionDetails = () => [...mockPrescriptionDetails];\r\n\r\nexport const getPrescriptionDetailsByPrescriptionId = (prescriptionId: string) => {\r\n  return mockPrescriptionDetails.filter(detail => detail.prescriptionId === prescriptionId);\r\n};\r\n\r\nexport const getMedicinesForPrescription = (prescriptionId: string) => {\r\n  const details = getPrescriptionDetailsByPrescriptionId(prescriptionId);\r\n  return details.map(detail => {\r\n    const medicine = getMedicineById(detail.medicineId);\r\n    return {\r\n      ...detail,\r\n      medicine: medicine || null\r\n    };\r\n  });\r\n};\r\n\r\n// Invoices\r\nexport const getAllInvoices = () => [...mockInvoices];\r\n\r\nexport const getInvoiceById = (id: string) => {\r\n  return mockInvoices.find(invoice => invoice._id === id);\r\n};\r\n\r\nexport const getInvoiceByPrescriptionId = (prescriptionId: string) => {\r\n  return mockInvoices.find(invoice => invoice.prescriptionId === prescriptionId);\r\n};\r\n\r\nexport const getInvoicesByPatientId = (patientId: string) => {\r\n  return mockInvoices.filter(invoice => invoice.patientId === patientId);\r\n};\r\n\r\nexport const getInvoicesByStatus = (status: string) => {\r\n  return mockInvoices.filter(invoice => invoice.status === status);\r\n};\r\n\r\n// Hàm hữu ích khác\r\nexport const getPatientFullPrescriptionDetails = (patientId: string) => {\r\n  // Lấy tất cả đơn thuốc của bệnh nhân\r\n  const prescriptions = getPrescriptionsByPatientId(patientId);\r\n  \r\n  return prescriptions.map(prescription => {\r\n    // Lấy thông tin bác sĩ\r\n    const doctor = getUserById(prescription.doctorId);\r\n    \r\n    // Lấy chi tiết đơn thuốc và thông tin thuốc\r\n    const details = getPrescriptionDetailsByPrescriptionId(prescription._id);\r\n    const medicineDetails = details.map(detail => {\r\n      const medicine = getMedicineById(detail.medicineId);\r\n      return {\r\n        ...detail,\r\n        medicineName: medicine ? medicine.name : 'Unknown',\r\n        medicinePrice: medicine ? medicine.price : 0\r\n      };\r\n    });\r\n    \r\n    // Lấy hóa đơn nếu có\r\n    const invoice = getInvoiceByPrescriptionId(prescription._id);\r\n    \r\n    return {\r\n      ...prescription,\r\n      doctorName: doctor ? doctor.fullName : 'Unknown',\r\n      details: medicineDetails,\r\n      invoice: invoice || null\r\n    };\r\n  });\r\n};\r\n\r\n// Hàm lấy danh sách bệnh nhân\r\nexport const getAllPatients = () => {\r\n  return mockUsers.filter(user => user.role === 'PATIENT');\r\n};\r\n\r\n// Hàm lấy danh sách bác sĩ\r\nexport const getAllDoctors = () => {\r\n  return mockUsers.filter(user => user.role === 'DOCTOR');\r\n};\r\n\r\n// Type aliases để thuận tiện cho việc sử dụng\r\nexport type Patient = User;\r\nexport const mockPatients = getAllPatients();\r\n\r\n// Hàm tạo MongoDB-like ID\r\nexport const generateMongoId = () => {\r\n  // MongoDB ObjectId format: 24 hex characters\r\n  const timestamp = Math.floor(Date.now() / 1000).toString(16).padStart(8, '0');\r\n  const randomPart = Array(16).fill(0).map(() => Math.floor(Math.random() * 16).toString(16)).join('');\r\n  return timestamp + randomPart;\r\n};\r\n\r\n// Hàm tạo userId tự động\r\nexport const generateNextUserId = () => {\r\n  // Tìm user ID lớn nhất hiện tại với pattern 'u' + number\r\n  const patientUserIds = mockUsers\r\n    .filter(user => user.role === 'PATIENT' && /^u\\d+$/.test(user.userId))\r\n    .map(user => parseInt(user.userId.substring(1)));\r\n  \r\n  const nextNumber = patientUserIds.length > 0 ? Math.max(...patientUserIds) + 1 : 1;\r\n  return `u${nextNumber}`;\r\n};\r\n\r\n// Hàm kiểm tra trùng lặp userId, username, email\r\nconst checkDuplicates = (patient: Partial<User>) => {\r\n  const errors = [];\r\n  \r\n  // Kiểm tra userId nếu được cung cấp\r\n  if (patient.userId && mockUsers.some(user => user.userId === patient.userId)) {\r\n    errors.push(`User ID '${patient.userId}' đã tồn tại`);\r\n  }\r\n  \r\n  // Kiểm tra username nếu được cung cấp\r\n  if (patient.username && mockUsers.some(user => user.username === patient.username)) {\r\n    errors.push(`Username '${patient.username}' đã tồn tại`);\r\n  }\r\n  \r\n  // Kiểm tra email nếu được cung cấp\r\n  if (patient.email && mockUsers.some(user => user.email === patient.email)) {\r\n    errors.push(`Email '${patient.email}' đã tồn tại`);\r\n  }\r\n  \r\n  return errors;\r\n};\r\n\r\n// Hàm thêm bệnh nhân mới\r\nexport const addPatient = (patient: Partial<Omit<User, '_id' | 'createdAt' | 'updatedAt' | '__v'>>) => {\r\n  // Kiểm tra thông tin trùng lặp\r\n  const duplicateErrors = checkDuplicates(patient);\r\n  if (duplicateErrors.length > 0) {\r\n    throw new Error(`Không thể thêm bệnh nhân: ${duplicateErrors.join(', ')}`);\r\n  }\r\n\r\n  // Tạo ID MongoDB-like mới\r\n  const _id = generateMongoId();\r\n  const now = new Date().toISOString();\r\n  \r\n  // Tạo userId tự động nếu không được cung cấp\r\n  const userId = patient.userId || generateNextUserId();\r\n  \r\n  const newPatient: User = {\r\n    _id,\r\n    userId,\r\n    username: patient.username || `patient_${userId}`,\r\n    email: patient.email || `${userId}@example.com`,\r\n    password: patient.password || '$2a$10$iC8rd3mgPjzq/0USw63zquFgGmqpSJpECiKvlK',\r\n    fullName: patient.fullName || 'Bệnh nhân mới',\r\n    phone: patient.phone || '',\r\n    role: 'PATIENT',\r\n    createdAt: now,\r\n    updatedAt: now,\r\n    __v: 0\r\n  };\r\n  \r\n  mockUsers.push(newPatient);\r\n  return newPatient;\r\n};\r\n\r\n// Hàm cập nhật thông tin bệnh nhân\r\nexport const updatePatient = (id: string, patientData: Partial<User>) => {\r\n  const index = mockUsers.findIndex(user => user._id === id);\r\n  if (index === -1) {\r\n    return null;\r\n  }\r\n  \r\n  const currentUser = mockUsers[index];\r\n  \r\n  // Kiểm tra trùng lặp với các user khác (không phải chính user này)\r\n  const duplicateErrors = [];\r\n  \r\n  // Kiểm tra userId nếu thay đổi\r\n  if (patientData.userId && patientData.userId !== currentUser.userId) {\r\n    if (mockUsers.some(user => user.userId === patientData.userId)) {\r\n      duplicateErrors.push(`User ID '${patientData.userId}' đã tồn tại`);\r\n    }\r\n  }\r\n  \r\n  // Kiểm tra username nếu thay đổi\r\n  if (patientData.username && patientData.username !== currentUser.username) {\r\n    if (mockUsers.some(user => user.username === patientData.username)) {\r\n      duplicateErrors.push(`Username '${patientData.username}' đã tồn tại`);\r\n    }\r\n  }\r\n  \r\n  // Kiểm tra email nếu thay đổi\r\n  if (patientData.email && patientData.email !== currentUser.email) {\r\n    if (mockUsers.some(user => user.email === patientData.email)) {\r\n      duplicateErrors.push(`Email '${patientData.email}' đã tồn tại`);\r\n    }\r\n  }\r\n  \r\n  if (duplicateErrors.length > 0) {\r\n    throw new Error(`Không thể cập nhật bệnh nhân: ${duplicateErrors.join(', ')}`);\r\n  }\r\n  \r\n  // Cập nhật thông tin user\r\n  mockUsers[index] = {\r\n    ...currentUser,\r\n    ...patientData,\r\n    updatedAt: new Date().toISOString()\r\n  };\r\n  \r\n  return mockUsers[index];\r\n};\r\n\r\n// Hàm xóa bệnh nhân\r\nexport const deletePatient = (id: string) => {\r\n  const index = mockUsers.findIndex(user => user._id === id);\r\n  if (index !== -1) {\r\n    const deletedPatient = mockUsers[index];\r\n    mockUsers.splice(index, 1);\r\n    return deletedPatient;\r\n  }\r\n  return null;\r\n};\r\n\r\n// Hàm thêm queue mới\r\nexport const addQueue = (patientId: string, status: 'waiting' | 'in_progress' | 'completed' | 'canceled' = 'waiting') => {\r\n  // Kiểm tra xem patientId có tồn tại và là bệnh nhân không\r\n  const patient = getUserById(patientId);\r\n  if (!patient || patient.role !== 'PATIENT') {\r\n    console.error('Invalid patient ID or user is not a patient');\r\n    return null;\r\n  }\r\n\r\n  // Kiểm tra xem bệnh nhân đã có trong queue chưa\r\n  const existingQueue = getQueueByPatientId(patientId);\r\n  if (existingQueue) {\r\n    console.warn('Patient already in queue');\r\n    return existingQueue;\r\n  }\r\n\r\n  // Tạo queue mới\r\n  const newQueue: Queue = {\r\n    _id: `queue_${Date.now()}`,\r\n    patient: patientId,\r\n    status: status,\r\n    createdAt: new Date().toISOString(),\r\n    updatedAt: new Date().toISOString(),\r\n    __v: 0\r\n  };\r\n\r\n  mockQueues.push(newQueue);\r\n  return newQueue;\r\n};\r\n\r\n// Interface mở rộng Queue để thêm thông tin bác sĩ\r\ninterface QueueWithDoctor extends Queue {\r\n  doctorId?: string;\r\n}\r\n\r\n// Hàm cập nhật trạng thái queue và có thể thêm bác sĩ nếu cần\r\nexport const updateQueueStatus = (\r\n  queueId: string, \r\n  status: 'waiting' | 'in_progress' | 'completed' | 'canceled', \r\n  doctorId?: string\r\n) => {\r\n  const index = mockQueues.findIndex(queue => queue._id === queueId);\r\n  if (index !== -1) {\r\n    const updatedQueue: QueueWithDoctor = {\r\n      ...mockQueues[index],\r\n      status: status,\r\n      updatedAt: new Date().toISOString()\r\n    };\r\n    \r\n    // Nếu có doctorId và queue chuyển sang trạng thái in_progress, lưu doctorId vào queue\r\n    if (doctorId && status === 'in_progress') {\r\n      updatedQueue.doctorId = doctorId;\r\n    }\r\n    \r\n    mockQueues[index] = updatedQueue as Queue;\r\n    return mockQueues[index];\r\n  }\r\n  return null;\r\n};\r\n\r\n// Hàm xóa queue\r\nexport const deleteQueue = (queueId: string) => {\r\n  const index = mockQueues.findIndex(queue => queue._id === queueId);\r\n  if (index !== -1) {\r\n    const deletedQueue = mockQueues[index];\r\n    mockQueues.splice(index, 1);\r\n    return deletedQueue;\r\n  }\r\n  return null;\r\n};\r\n\r\n// Hàm lấy danh sách bệnh nhân đang chờ khám\r\nexport const getWaitingPatients = () => {\r\n  const waitingQueues = getQueuesByStatus('waiting');\r\n  return waitingQueues.map(queue => {\r\n    const patient = getUserById(queue.patient);\r\n    return {\r\n      queueInfo: queue,\r\n      patientInfo: patient || null\r\n    };\r\n  });\r\n};\r\n\r\n// Hàm lấy tất cả queue kèm thông tin bệnh nhân\r\nexport const getAllQueuesWithPatientInfo = () => {\r\n  return mockQueues.map(queue => {\r\n    const patient = getUserById(queue.patient);\r\n    return {\r\n      ...queue,\r\n      patientInfo: patient || null\r\n    };\r\n  });\r\n};\r\n"],"names":[],"mappings":"AAAA,0CAA0C;AAE1C,yBAAyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyElB,MAAM,YAAoB;IAC/B;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,QAAQ;QACR,UAAU;QACV,OAAO;QACP,UAAU;QACV,UAAU;QACV,OAAO;QACP,MAAM;QACN,WAAW;QACX,WAAW;QACX,KAAK;IACP;CACD;AAGM,MAAM,aAAsB;IACjC;QACE,KAAK;QACL,SAAS;QACT,QAAQ;QACR,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,SAAS;QACT,QAAQ;QACR,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,SAAS;QACT,QAAQ;QACR,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,SAAS;QACT,QAAQ;QACR,WAAW;QACX,WAAW;QACX,KAAK;IACP;IACA;QACE,KAAK;QACL,SAAS;QACT,QAAQ;QACR,WAAW;QACX,WAAW;QACX,KAAK;IACP;CACD;AAGM,MAAM,gBAA4B;IACvC;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,kBAAkB;QAClB,MAAM;QACN,YAAY;QACZ,OAAO;QACP,KAAK;QACL,WAAW;QACX,WAAW;IACb;CACD;AAGM,MAAM,oBAAoC;IAC/C;QACE,KAAK;QACL,sBAAsB;QACtB,WAAW;QACX,UAAU;QACV,WAAW;QACX,MAAM;QACN,QAAQ;QACR,KAAK;QACL,WAAW;QACX,WAAW;IACb;IACA;QACE,KAAK;QACL,sBAAsB;QACtB,WAAW;QACX,UAAU;QACV,WAAW;QACX,MAAM;QACN,QAAQ;QACR,KAAK;QACL,WAAW;QACX,WAAW;IACb;IA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","debugId":null}},
    {"offset": {"line": 1558, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/receptionistPage/components/Patients/PatientForm.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { XIcon, UserIcon, SaveIcon } from 'lucide-react';\r\nimport { User, addPatient, updatePatient } from '../../../datats/mockPatients';\r\n\r\ninterface PatientFormProps {\r\n  patient?: User | null;\r\n  onClose: () => void;\r\n  onSave?: (patient: Partial<User>) => void;\r\n}\r\n\r\nexport function PatientForm({ patient, onClose, onSave }: PatientFormProps) {\r\n  const [formData, setFormData] = useState({\r\n    fullName: '',\r\n    userId: '',\r\n    username: '',\r\n    email: '',\r\n    phone: '',\r\n    password: '',\r\n    role: 'PATIENT' as const,\r\n  });\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const isEditing = !!patient;\r\n\r\n  useEffect(() => {\r\n    if (patient) {\r\n      setFormData({\r\n        fullName: patient.fullName || '',\r\n        userId: patient.userId || '',\r\n        username: patient.username || '',\r\n        email: patient.email || '',\r\n        phone: patient.phone || '',\r\n        password: '',  // Không hiển thị mật khẩu\r\n        role: 'PATIENT',  // Vì form này chỉ dành cho bệnh nhân\r\n      });\r\n    }\r\n  }, [patient]);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n    // Xóa lỗi khi người dùng thay đổi input\r\n    setError(null);\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    // Xóa lỗi trước khi submit\r\n    setError(null);\r\n    \r\n    // Chuẩn bị dữ liệu người dùng\r\n    const userData = {\r\n      ...formData,\r\n      // Nếu không phải là chế độ chỉnh sửa và userId trống, không cần thêm vào\r\n      // hệ thống sẽ tự động tạo userId\r\n      ...((!isEditing && !formData.userId.trim()) ? {} : { userId: formData.userId }),\r\n      role: formData.role as 'PATIENT' | 'DOCTOR' | 'PHARMACIST' | 'RECEPTIONIST' | 'ADMIN',\r\n    };\r\n\r\n    try {\r\n      if (isEditing && patient && patient._id) {\r\n        // Cập nhật bệnh nhân hiện có\r\n        const updatedPatient = updatePatient(patient._id, userData);\r\n        if (updatedPatient) {\r\n          alert(`Đã cập nhật thông tin bệnh nhân: ${updatedPatient.fullName}`);\r\n        } else {\r\n          setError('Không thể cập nhật thông tin bệnh nhân. Vui lòng thử lại.');\r\n          return;\r\n        }\r\n      } else {\r\n        // Thêm bệnh nhân mới\r\n        const newPatient = addPatient(userData);\r\n        if (newPatient) {\r\n          alert(`Đã thêm bệnh nhân mới: ${newPatient.fullName} (ID: ${newPatient.userId})`);\r\n        } else {\r\n          setError('Không thể thêm bệnh nhân mới. Vui lòng thử lại.');\r\n          return;\r\n        }\r\n      }\r\n\r\n      // Gọi onSave callback nếu có để thông báo lên component cha\r\n      if (onSave) {\r\n        onSave(userData);\r\n      }\r\n      \r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Lỗi khi lưu bệnh nhân:', error);\r\n      // Hiển thị thông báo lỗi\r\n      if (error instanceof Error) {\r\n        setError(error.message);\r\n      } else {\r\n        setError('Đã xảy ra lỗi khi lưu thông tin bệnh nhân.');\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      {/* Form header */}\r\n      <div className=\"px-6 py-4 border-b border-gray-300 bg-gray-50 flex justify-between items-center\">\r\n        <div className=\"flex items-center\">\r\n          <UserIcon size={20} className=\"mr-2 text-black\" />\r\n          <h2 className=\"text-lg font-semibold text-black\">\r\n            {isEditing ? 'Sửa thông tin bệnh nhân' : 'Thêm bệnh nhân mới'}\r\n          </h2>\r\n        </div>\r\n        <button\r\n          onClick={onClose}\r\n          className=\"p-1.5 rounded-full hover:bg-gray-200 text-black transition-colors\"\r\n        >\r\n          <XIcon size={20} />\r\n        </button>\r\n      </div>\r\n\r\n      {/* Form content */}\r\n      <form onSubmit={handleSubmit} className=\"p-6\">\r\n        {/* Error message */}\r\n        {error && (\r\n          <div className=\"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg\">\r\n            <p className=\"font-medium\">{error}</p>\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <div>\r\n            <label htmlFor=\"fullName\" className=\"block text-sm font-medium text-black mb-2\">\r\n              Họ và tên <span className=\"text-red-600\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"fullName\"\r\n              name=\"fullName\"\r\n              required\r\n              placeholder=\"Nhập họ và tên...\"\r\n              className=\"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-black focus:border-black text-black shadow-sm\"\r\n              value={formData.fullName}\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"userId\" className=\"block text-sm font-medium text-black mb-2\">\r\n              User ID {isEditing && <span className=\"text-red-600\">*</span>}\r\n              {!isEditing && <span className=\"text-xs text-gray-500 ml-1\">(Tự động nếu để trống)</span>}\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"userId\"\r\n              name=\"userId\"\r\n              required={isEditing}\r\n              placeholder={isEditing ? \"Nhập User ID...\" : \"Để trống để tạo ID tự động...\"}\r\n              className=\"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-black focus:border-black text-black shadow-sm\"\r\n              value={formData.userId}\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"username\" className=\"block text-sm font-medium text-black mb-2\">\r\n              Tên đăng nhập <span className=\"text-red-600\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"username\"\r\n              name=\"username\"\r\n              required\r\n              placeholder=\"Nhập tên đăng nhập...\"\r\n              className=\"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-black focus:border-black text-black shadow-sm\"\r\n              value={formData.username}\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-black mb-2\">\r\n              Email <span className=\"text-red-600\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"email\"\r\n              id=\"email\"\r\n              name=\"email\"\r\n              required\r\n              placeholder=\"Nhập email...\"\r\n              className=\"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-black focus:border-black text-black shadow-sm\"\r\n              value={formData.email}\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"phone\" className=\"block text-sm font-medium text-black mb-2\">\r\n              Số điện thoại <span className=\"text-red-600\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"tel\"\r\n              id=\"phone\"\r\n              name=\"phone\"\r\n              required\r\n              placeholder=\"Nhập số điện thoại...\"\r\n              className=\"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-black focus:border-black text-black shadow-sm\"\r\n              value={formData.phone}\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-black mb-2\">\r\n              Mật khẩu {!isEditing && <span className=\"text-red-600\">*</span>}\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              name=\"password\"\r\n              required={!isEditing}\r\n              placeholder={isEditing ? \"Để trống nếu không thay đổi...\" : \"Nhập mật khẩu...\"}\r\n              className=\"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-black focus:border-black text-black shadow-sm\"\r\n              value={formData.password}\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Form actions */}\r\n        <div className=\"mt-8 pt-5 border-t border-gray-300 flex justify-end gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            className=\"px-5 py-2 border border-gray-300 rounded-lg text-black font-medium hover:bg-gray-50 transition-colors\"\r\n          >\r\n            Hủy\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"px-5 py-2 bg-green-600 rounded-lg text-white font-medium hover:bg-green-700 transition-colors flex items-center shadow-sm\"\r\n          >\r\n            <SaveIcon size={18} className=\"mr-2\" />\r\n            {isEditing ? 'Cập nhật' : 'Lưu'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2047, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/receptionistPage/PatientManagement.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { SearchIcon, PlusIcon, EditIcon, TrashIcon, UsersIcon, FilterIcon, ArrowUpDown, UserPlusIcon } from 'lucide-react';\r\nimport { PatientForm } from './components/Patients/PatientForm';\r\nimport { \r\n  mockPatients, \r\n  searchUsers, \r\n  User, \r\n  addPatient, \r\n  updatePatient, \r\n  deletePatient, \r\n  getAllPatients,\r\n  addQueue,\r\n  getQueueByPatientId\r\n} from '../datats/mockPatients';\r\n\r\ninterface PatientManagementProps {\r\n  onBack: () => void;\r\n}\r\n\r\nexport function PatientManagement({ onBack }: PatientManagementProps) {\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [editingPatient, setEditingPatient] = useState<User | null>(null);\r\n  // Thêm state để theo dõi thay đổi và buộc giao diện cập nhật\r\n  const [refreshData, setRefreshData] = useState(0);\r\n  \r\n  // Sử dụng dữ liệu bệnh nhân từ mockPatients - hàm này sẽ lấy danh sách mới mỗi khi gọi\r\n  const [patients, setPatients] = useState<User[]>([]);\r\n  \r\n  // Cập nhật danh sách bệnh nhân khi có thay đổi\r\n  useEffect(() => {\r\n    // Sử dụng getAllPatients() để luôn lấy danh sách mới nhất\r\n    const latestPatients = getAllPatients();\r\n    setPatients(latestPatients);\r\n  }, [refreshData]);\r\n  \r\n  const handleEdit = (patient: User) => {\r\n    setEditingPatient(patient);\r\n    setShowForm(true);\r\n  };\r\n  \r\n  const handleDelete = (id: string) => {\r\n    const confirmed = window.confirm(\"Bạn có chắc chắn muốn xóa bệnh nhân này không?\");\r\n    if (confirmed) {\r\n      deletePatient(id);\r\n      // Kích hoạt cập nhật giao diện\r\n      setRefreshData(prev => prev + 1);\r\n    }\r\n  };\r\n  \r\n  const handleSavePatient = (patientData: Partial<User>) => {\r\n    if (editingPatient && editingPatient._id) {\r\n      // Cập nhật bệnh nhân hiện có\r\n      updatePatient(editingPatient._id, patientData);\r\n    } else {\r\n      // Thêm bệnh nhân mới\r\n      addPatient({\r\n        ...patientData,\r\n        role: 'PATIENT'\r\n      });\r\n    }\r\n    // Kích hoạt cập nhật giao diện\r\n    setRefreshData(prev => prev + 1);\r\n    handleCloseForm();\r\n  };\r\n  \r\n  const handleCloseForm = () => {\r\n    setShowForm(false);\r\n    setEditingPatient(null);\r\n  };\r\n  \r\n  // Hàm thêm bệnh nhân vào phòng chờ\r\n  const addToWaitingRoom = (patientId: string) => {\r\n    // Kiểm tra xem bệnh nhân đã có trong phòng chờ chưa\r\n    const existingQueue = getQueueByPatientId(patientId);\r\n    \r\n    if (existingQueue) {\r\n      if (existingQueue.status === 'waiting' || existingQueue.status === 'in_progress') {\r\n        alert(`Bệnh nhân này đã có trong phòng chờ hoặc đang khám!`);\r\n        return;\r\n      } else if (existingQueue.status === 'completed' || existingQueue.status === 'canceled') {\r\n        // Nếu bệnh nhân đã từng được thêm vào phòng chờ trước đó,\r\n        // nhưng đã hoàn thành hoặc hủy, ta có thể thêm họ vào lại phòng chờ\r\n        const newQueue = addQueue(patientId);\r\n        if (newQueue) {\r\n          alert(`Đã thêm bệnh nhân vào phòng chờ!`);\r\n        } else {\r\n          alert(`Có lỗi khi thêm bệnh nhân vào phòng chờ!`);\r\n        }\r\n      }\r\n    } else {\r\n      // Nếu bệnh nhân chưa từng được thêm vào phòng chờ\r\n      const newQueue = addQueue(patientId);\r\n      if (newQueue) {\r\n        alert(`Đã thêm bệnh nhân vào phòng chờ!`);\r\n      } else {\r\n        alert(`Có lỗi khi thêm bệnh nhân vào phòng chờ!`);\r\n      }\r\n    }\r\n  };\r\n  \r\n  // Sử dụng hàm searchUsers từ mockPatients.ts để tìm kiếm bệnh nhân\r\n  const filteredPatients = searchTerm.trim() === '' \r\n    ? patients \r\n    : searchUsers(searchTerm).filter(user => user.role === 'PATIENT');\r\n  \r\n  return (\r\n    <div className=\"w-full px-4 sm:px-6\">\r\n      <div className=\"flex items-center mb-4\">\r\n        <button \r\n          onClick={onBack}\r\n          className=\"px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-md flex items-center text-gray-700\"\r\n        >\r\n          ← Quay lại\r\n        </button>\r\n      </div>\r\n      {/* Header section */}\r\n      <div className=\"mb-8 border-b border-gray-200 pb-5\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <h1 className=\"text-3xl font-bold text-black tracking-tight\">Quản lý bệnh nhân</h1>\r\n          <button \r\n            onClick={() => setShowForm(true)} \r\n            className=\"bg-green-600 hover:bg-green-700 text-white px-5 py-2.5 rounded-lg flex items-center font-medium shadow-sm transition-colors\"\r\n          >\r\n            <PlusIcon size={18} className=\"mr-2\" />\r\n            Thêm bệnh nhân\r\n          </button>\r\n        </div>\r\n        <p className=\"text-black mt-2\">\r\n          Quản lý thông tin bệnh nhân và thêm vào phòng chờ\r\n        </p>\r\n      </div>\r\n      \r\n      {/* Main content */}\r\n      <div className=\"border border-gray-300 rounded-xl shadow-sm overflow-hidden bg-white\">\r\n        {/* Search and filters */}\r\n        <div className=\"p-6 border-b border-gray-300 bg-gray-50\">\r\n          <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\r\n            <div className=\"relative flex-1\">\r\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                <SearchIcon size={18} className=\"text-black\" />\r\n              </div>\r\n              <input \r\n                type=\"text\" \r\n                placeholder=\"Tìm kiếm theo tên, ID, email hoặc SĐT...\" \r\n                className=\"pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-black focus:border-black text-black placeholder-gray-500 shadow-sm\" \r\n                value={searchTerm} \r\n                onChange={e => setSearchTerm(e.target.value)} \r\n              />\r\n            </div>\r\n            \r\n            <div className=\"flex gap-3\">\r\n              <div className=\"relative\">\r\n                <select className=\"appearance-none bg-white border border-gray-300 rounded-lg pl-10 pr-10 py-2.5 focus:outline-none focus:ring-2 focus:ring-black focus:border-black text-black shadow-sm\">\r\n                  <option value=\"\">Tất cả vai trò</option>\r\n                  <option value=\"PATIENT\">Bệnh nhân</option>\r\n                  <option value=\"DOCTOR\">Bác sĩ</option>\r\n                  <option value=\"PHARMACIST\">Nhân viên quầy thuốc</option>\r\n                  <option value=\"RECEPTIONIST\">Lễ tân</option>\r\n                  <option value=\"ADMIN\">Quản trị viên</option>\r\n                </select>\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <FilterIcon size={16} className=\"text-black\" />\r\n                </div>\r\n                <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\">\r\n                  <svg className=\"h-4 w-4 text-black\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                    <path fillRule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"relative\">\r\n                <select className=\"appearance-none bg-white border border-gray-300 rounded-lg pl-10 pr-10 py-2.5 focus:outline-none focus:ring-2 focus:ring-black focus:border-black text-black shadow-sm\">\r\n                  <option value=\"\">Sắp xếp theo</option>\r\n                  <option value=\"fullName\">Tên</option>\r\n                  <option value=\"username\">Tên đăng nhập</option>\r\n                  <option value=\"createdAt\">Ngày tạo</option>\r\n                </select>\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <ArrowUpDown size={16} className=\"text-black\" />\r\n                </div>\r\n                <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\">\r\n                  <svg className=\"h-4 w-4 text-black\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                    <path fillRule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Table or empty state */}\r\n        <div className=\"p-6\">\r\n          {filteredPatients.length > 0 ? (\r\n            <div className=\"overflow-x-auto border border-gray-200 rounded-lg\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-200\">\r\n                      Họ và tên\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-200\">\r\n                      User ID\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-200\">\r\n                      Tên đăng nhập\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-200\">\r\n                      Email\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-200\">\r\n                      Số điện thoại\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-200\">\r\n                      Vai trò\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider border-b border-gray-200\">\r\n                      Thao tác\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {filteredPatients.map((patient, index) => (\r\n                    <tr key={patient._id} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\r\n                      <td className=\"px-6 py-3.5 whitespace-nowrap text-sm font-medium text-black\">\r\n                        {patient.fullName}\r\n                      </td>\r\n                      <td className=\"px-6 py-3.5 whitespace-nowrap text-sm text-black\">\r\n                        {patient.userId}\r\n                      </td>\r\n                      <td className=\"px-6 py-3.5 whitespace-nowrap text-sm text-black\">\r\n                        {patient.username}\r\n                      </td>\r\n                      <td className=\"px-6 py-3.5 whitespace-nowrap text-sm text-black\">\r\n                        {patient.email}\r\n                      </td>\r\n                      <td className=\"px-6 py-3.5 whitespace-nowrap text-sm text-black\">\r\n                        {patient.phone}\r\n                      </td>\r\n                      <td className=\"px-6 py-3.5 whitespace-nowrap text-sm text-black\">\r\n                        {patient.role}\r\n                      </td>\r\n                      <td className=\"px-6 py-3.5 whitespace-nowrap text-sm text-black\">\r\n                        <div className=\"flex items-center space-x-3\">\r\n                          <button \r\n                            onClick={() => handleEdit(patient)} \r\n                            className=\"p-1.5 rounded-full hover:bg-gray-100 text-black border border-gray-300\"\r\n                            title=\"Chỉnh sửa\"\r\n                          >\r\n                            <EditIcon size={16} />\r\n                          </button>\r\n                          <button \r\n                            onClick={() => handleDelete(patient._id)}\r\n                            className=\"p-1.5 rounded-full hover:bg-gray-100 text-black border border-gray-300\"\r\n                            title=\"Xóa\"\r\n                          >\r\n                            <TrashIcon size={16} />\r\n                          </button>\r\n                          <button \r\n                            onClick={() => addToWaitingRoom(patient._id)}\r\n                            className=\"text-sm text-white bg-green-600 hover:bg-green-700 px-3 py-1.5 rounded-lg transition-colors shadow-sm flex items-center\"\r\n                          >\r\n                            <UserPlusIcon size={16} className=\"mr-1\" />\r\n                            Thêm vào phòng chờ\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex flex-col items-center justify-center py-16 border border-dashed border-gray-300 rounded-lg\">\r\n              <UsersIcon size={48} className=\"text-gray-400 mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-black\">\r\n                Không tìm thấy bệnh nhân\r\n              </h3>\r\n              <p className=\"text-black mt-2\">\r\n                Thử tìm kiếm với từ khóa khác hoặc thêm bệnh nhân mới\r\n              </p>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Pagination */}\r\n          {filteredPatients.length > 0 && (\r\n            <div className=\"mt-6 flex justify-between items-center\">\r\n              <p className=\"text-sm text-black\">\r\n                Hiển thị <span className=\"font-medium\">{filteredPatients.length}</span> bệnh nhân\r\n              </p>\r\n              <div className=\"inline-flex shadow-sm rounded-md\">\r\n                <button className=\"px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-black rounded-l-md hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-black focus:border-black transition-colors\">\r\n                  Trước\r\n                </button>\r\n                <button className=\"px-4 py-2 bg-gray-200 text-black text-sm font-medium border border-gray-300 relative -ml-px hover:bg-gray-300 focus:z-10 focus:outline-none focus:ring-1 focus:ring-black focus:border-black transition-colors\">\r\n                  1\r\n                </button>\r\n                <button className=\"px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-black rounded-r-md hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-black focus:border-black transition-colors\">\r\n                  Sau\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Modal form */}\r\n      {showForm && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n            <PatientForm \r\n              patient={editingPatient} \r\n              onClose={handleCloseForm}\r\n              onSave={handleSavePatient} \r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2839, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/receptionistPage/QueueManagement.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { MoveRightIcon, CheckCircleIcon, ClockIcon, UserIcon, X } from 'lucide-react';\r\nimport { \r\n  getAllQueuesWithPatientInfo, \r\n  updateQueueStatus, \r\n  Queue,\r\n  getAllDoctors,\r\n  User\r\n} from '../datats/mockPatients';\r\n\r\ninterface QueueManagementProps {\r\n  onBack: () => void;\r\n}\r\n\r\n// Thêm interface để định nghĩa loại dữ liệu cho queue đã có thông tin bệnh nhân\r\ninterface QueueWithPatientInfo extends Queue {\r\n  patientInfo: {\r\n    _id: string;\r\n    userId: string;\r\n    fullName: string;\r\n    phone: string;\r\n    role: string;\r\n    [key: string]: any;\r\n  } | null;\r\n}\r\n\r\n// Không cần interface Doctor nữa vì sẽ sử dụng User từ mockPatients.ts\r\n\r\nexport function QueueManagement({ onBack }: QueueManagementProps) {\r\n  // State để lưu trữ danh sách queue đã được fetch từ mockdata\r\n  const [queues, setQueues] = useState<QueueWithPatientInfo[]>([]);\r\n  \r\n  // State để lưu trữ danh sách bệnh nhân đang chờ\r\n  const [waitingPatients, setWaitingPatients] = useState<QueueWithPatientInfo[]>([]);\r\n  \r\n  // State để lưu trữ danh sách bệnh nhân đang khám\r\n  const [inProgressPatients, setInProgressPatients] = useState<QueueWithPatientInfo[]>([]);\r\n  \r\n  // Lấy danh sách bác sĩ từ mock data\r\n  const [doctors, setDoctors] = useState<User[]>([]);\r\n  \r\n  // State để theo dõi modal chọn bác sĩ\r\n  const [showDoctorModal, setShowDoctorModal] = useState(false);\r\n  const [selectedQueue, setSelectedQueue] = useState<string>('');\r\n  \r\n  // Effect để fetch dữ liệu queue từ mockdata khi component được render\r\n  useEffect(() => {\r\n    // Lấy toàn bộ queue cùng với thông tin bệnh nhân\r\n    const allQueues = getAllQueuesWithPatientInfo();\r\n    setQueues(allQueues);\r\n    \r\n    // Lọc ra các trạng thái khác nhau\r\n    const waiting = allQueues.filter(q => q.status === 'waiting');\r\n    const inProgress = allQueues.filter(q => q.status === 'in_progress');\r\n    \r\n    setWaitingPatients(waiting);\r\n    setInProgressPatients(inProgress);\r\n    \r\n    // Lấy danh sách bác sĩ\r\n    const allDoctors = getAllDoctors();\r\n    setDoctors(allDoctors);\r\n  }, []);\r\n  \r\n  // Tính thời gian chờ dựa trên createdAt (giả lập)\r\n  const calculateWaitingTime = (createdAt: string): string => {\r\n    const createdDate = new Date(createdAt);\r\n    const currentDate = new Date();\r\n    const diffMs = currentDate.getTime() - createdDate.getTime();\r\n    const diffMins = Math.round(diffMs / 60000);\r\n    \r\n    if (diffMins < 60) {\r\n      return `${diffMins} phút`;\r\n    } else {\r\n      const hours = Math.floor(diffMins / 60);\r\n      const mins = diffMins % 60;\r\n      return `${hours} giờ ${mins} phút`;\r\n    }\r\n  };\r\n  \r\n  // Hàm xử lý khi click vào nút \"Chuyển vào khám\"\r\n  const handleMoveToExamination = (queueId: string) => {\r\n    // Mở modal để chọn bác sĩ\r\n    setSelectedQueue(queueId);\r\n    setShowDoctorModal(true);\r\n  };\r\n  \r\n  // Hàm xử lý khi đã chọn bác sĩ và xác nhận chuyển bệnh nhân vào khám\r\n  const handleConfirmMoveToExamination = (doctorId: string) => {\r\n    // Cập nhật status của queue thành 'in_progress' trong mock data và thêm doctorId\r\n    const updatedQueue = updateQueueStatus(selectedQueue, 'in_progress', doctorId);\r\n    \r\n    if (updatedQueue) {\r\n      // Cập nhật lại state để re-render UI\r\n      const allQueues = getAllQueuesWithPatientInfo();\r\n      setQueues(allQueues);\r\n      \r\n      // Lọc lại các danh sách\r\n      const waiting = allQueues.filter(q => q.status === 'waiting');\r\n      const inProgress = allQueues.filter(q => q.status === 'in_progress');\r\n      \r\n      setWaitingPatients(waiting);\r\n      setInProgressPatients(inProgress);\r\n      \r\n      // Đóng modal\r\n      setShowDoctorModal(false);\r\n      setSelectedQueue('');\r\n    }\r\n  };\r\n  \r\n  // Hàm xử lý khi hoàn thành khám bệnh\r\n  const handleCompleteExamination = (queueId: string) => {\r\n    // Cập nhật status của queue thành 'completed' trong mock data\r\n    const updatedQueue = updateQueueStatus(queueId, 'completed');\r\n    \r\n    if (updatedQueue) {\r\n      // Cập nhật lại state để re-render UI\r\n      const allQueues = getAllQueuesWithPatientInfo();\r\n      setQueues(allQueues);\r\n      \r\n      // Lọc lại các danh sách\r\n      const waiting = allQueues.filter(q => q.status === 'waiting');\r\n      const inProgress = allQueues.filter(q => q.status === 'in_progress');\r\n      \r\n      setWaitingPatients(waiting);\r\n      setInProgressPatients(inProgress);\r\n    }\r\n  };\r\n  \r\n  // Lấy thông tin bác sĩ được chỉ định cho bệnh nhân\r\n  const getAssignedDoctor = (doctorId?: string) => {\r\n    if (!doctorId) return null;\r\n    return doctors.find(doctor => doctor._id === doctorId) || null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full px-4 sm:px-6\">\r\n      <div className=\"flex items-center mb-4\">\r\n        <button \r\n          onClick={onBack}\r\n          className=\"px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-md flex items-center text-gray-700\"\r\n        >\r\n          ← Quay lại\r\n        </button>\r\n      </div>\r\n      {/* Header section */}\r\n      <div className=\"mb-8 border-b border-gray-200 pb-5\">\r\n        <h1 className=\"text-3xl font-bold text-black tracking-tight\">Quản lý phòng chờ</h1>\r\n        <p className=\"text-black mt-2\">\r\n          Quản lý danh sách bệnh nhân đang chờ khám và theo dõi trạng thái\r\n        </p>\r\n      </div>\r\n      \r\n      {/* Main content grid */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n        {/* Waiting patients card */}\r\n        <div className=\"border border-gray-300 rounded-xl shadow-sm overflow-hidden bg-white\">\r\n          <div className=\"p-4 border-b border-gray-300 bg-gray-50 flex justify-between items-center\">\r\n            <div className=\"flex items-center\">\r\n              <ClockIcon size={20} className=\"text-black mr-2\" />\r\n              <h2 className=\"text-lg font-semibold text-black\">\r\n                Bệnh nhân đang chờ\r\n              </h2>\r\n            </div>\r\n            <span className=\"bg-gray-800 text-white text-sm px-3.5 py-1 rounded-full font-medium flex items-center\">\r\n              <UserIcon size={14} className=\"mr-1.5\" />\r\n              {waitingPatients.length} bệnh nhân\r\n            </span>\r\n          </div>\r\n          \r\n          {waitingPatients.length > 0 ? (\r\n            <div className=\"divide-y divide-gray-200\">\r\n              {waitingPatients.map((queue, index) => (\r\n                <div key={queue._id} className={`p-5 hover:bg-gray-50 transition-colors ${index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}`}>\r\n                  <div className=\"flex justify-between items-start mb-3\">\r\n                    <div>\r\n                      <h3 className=\"font-medium text-black text-base\">\r\n                        {queue.patientInfo?.fullName || 'Không có tên'}\r\n                      </h3>\r\n                      <p className=\"text-sm text-black mt-1\">\r\n                        ID: {queue.patientInfo?.userId || 'N/A'}\r\n                      </p>\r\n                      <p className=\"text-sm text-black mt-1\">\r\n                        SĐT: {queue.patientInfo?.phone || 'N/A'}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"bg-gray-200 border border-gray-300 text-black px-3 py-1 rounded-full text-sm font-medium\">\r\n                      Chờ\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-black flex items-center\">\r\n                      <ClockIcon size={16} className=\"mr-1.5 text-black\" />\r\n                      Thời gian chờ: <span className=\"font-medium ml-1\">{calculateWaitingTime(queue.createdAt)}</span>\r\n                    </span>\r\n                    <button \r\n                      onClick={() => handleMoveToExamination(queue._id)}\r\n                      className=\"flex items-center text-sm bg-green-600 hover:bg-green-700 text-white px-3.5 py-1.5 rounded-md transition-colors shadow-sm\"\r\n                    >\r\n                      Chuyển vào khám\r\n                      <MoveRightIcon size={16} className=\"ml-1.5\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"p-8 text-center\">\r\n              <ClockIcon size={40} className=\"mx-auto text-gray-400 mb-3\" />\r\n              <p className=\"text-black font-medium\">Không có bệnh nhân nào đang chờ</p>\r\n              <p className=\"text-sm text-black mt-1\">Hãy thêm bệnh nhân vào danh sách chờ từ màn hình Quản lý bệnh nhân</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        {/* In examination patients card */}\r\n        <div className=\"border border-gray-300 rounded-xl shadow-sm overflow-hidden bg-white\">\r\n          <div className=\"p-4 border-b border-gray-300 bg-gray-50 flex justify-between items-center\">\r\n            <div className=\"flex items-center\">\r\n              <CheckCircleIcon size={20} className=\"text-black mr-2\" />\r\n              <h2 className=\"text-lg font-semibold text-black\">Đang khám</h2>\r\n            </div>\r\n            <span className=\"bg-gray-800 text-white text-sm px-3.5 py-1 rounded-full font-medium flex items-center\">\r\n              <UserIcon size={14} className=\"mr-1.5\" />\r\n              {inProgressPatients.length} bệnh nhân\r\n            </span>\r\n          </div>\r\n          \r\n          {inProgressPatients.length > 0 ? (\r\n            <div className=\"divide-y divide-gray-200\">\r\n              {inProgressPatients.map((queue, index) => {\r\n                const assignedDoctor = getAssignedDoctor(queue.doctorId);\r\n                return (\r\n                  <div key={queue._id} className={`p-5 hover:bg-gray-50 transition-colors ${index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}`}>\r\n                    <div className=\"flex justify-between items-start mb-4\">\r\n                      <div>\r\n                        <h3 className=\"font-medium text-black text-base\">\r\n                          {queue.patientInfo?.fullName || 'Không có tên'}\r\n                        </h3>\r\n                        <p className=\"text-sm text-black mt-1\">\r\n                          ID: {queue.patientInfo?.userId || 'N/A'}\r\n                        </p>\r\n                        <p className=\"text-sm text-black mt-1\">\r\n                          SĐT: {queue.patientInfo?.phone || 'N/A'}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"bg-blue-100 border border-blue-200 text-blue-800 px-3 py-1 rounded-full text-sm font-medium\">\r\n                        Đang khám\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-2 gap-4 mt-3 p-3 bg-gray-50 rounded-lg border border-gray-200\">\r\n                      <div>\r\n                        <p className=\"text-xs font-medium text-black uppercase tracking-wide\">Bác sĩ khám</p>\r\n                        <p className=\"text-sm font-medium text-black mt-1\">\r\n                          {assignedDoctor ? assignedDoctor.fullName : 'Chưa chỉ định'}\r\n                        </p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-xs font-medium text-black uppercase tracking-wide\">Phòng khám</p>\r\n                        <p className=\"text-sm font-medium text-black mt-1\">\r\n                          {assignedDoctor ? `Phòng ${100 + parseInt(assignedDoctor._id.slice(-2), 16) % 10}` : 'N/A'}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"mt-4 flex justify-end\">\r\n                      <button \r\n                        onClick={() => handleCompleteExamination(queue._id)}\r\n                        className=\"flex items-center text-sm bg-blue-600 hover:bg-blue-700 text-white px-3.5 py-1.5 rounded-md transition-colors shadow-sm\"\r\n                      >\r\n                        Hoàn thành khám\r\n                        <CheckCircleIcon size={16} className=\"ml-1.5\" />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            <div className=\"p-8 text-center\">\r\n              <CheckCircleIcon size={40} className=\"mx-auto text-gray-400 mb-3\" />\r\n              <p className=\"text-black font-medium\">Không có bệnh nhân nào đang khám</p>\r\n              <p className=\"text-sm text-black mt-1\">Chuyển bệnh nhân từ phòng chờ vào khám</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Modal chọn bác sĩ */}\r\n      {showDoctorModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg shadow-xl p-6 w-full max-w-md\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h2 className=\"text-xl font-semibold text-black\">Chọn bác sĩ</h2>\r\n              <button \r\n                onClick={() => setShowDoctorModal(false)}\r\n                className=\"text-gray-500 hover:text-gray-700\"\r\n              >\r\n                <X size={20} />\r\n              </button>\r\n            </div>\r\n            \r\n            <p className=\"text-black mb-4\">Vui lòng chọn bác sĩ để chuyển bệnh nhân vào khám:</p>\r\n            \r\n            {doctors.length > 0 ? (\r\n              <div className=\"space-y-2 max-h-60 overflow-auto\">\r\n                {doctors.map((doctor) => (\r\n                  <div \r\n                    key={doctor._id}\r\n                    onClick={() => handleConfirmMoveToExamination(doctor._id)}\r\n                    className=\"p-3 border border-gray-300 rounded-md hover:bg-blue-50 cursor-pointer transition-colors flex justify-between items-center\"\r\n                  >\r\n                    <div>\r\n                      <p className=\"font-medium text-black\">{doctor.fullName}</p>\r\n                      <p className=\"text-sm text-gray-600\">{doctor.email}</p>\r\n                    </div>\r\n                    <div className=\"bg-gray-100 text-black text-xs px-2 py-1 rounded\">\r\n                      Phòng {100 + parseInt(doctor._id.slice(-2), 16) % 10}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <p className=\"text-center py-4 text-black\">Không có bác sĩ nào</p>\r\n            )}\r\n            \r\n            <div className=\"mt-6 flex justify-end\">\r\n              <button \r\n                onClick={() => setShowDoctorModal(false)}\r\n                className=\"px-4 py-2 bg-gray-200 rounded-md mr-2 text-black hover:bg-gray-300\"\r\n              >\r\n                Hủy\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3605, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/receptionistPage/MedicationHistory.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { SearchIcon, CalendarIcon, PillIcon } from 'lucide-react';\r\nimport { \r\n  getAllPrescriptions,\r\n  getUserById,\r\n  getPrescriptionDetailsByPrescriptionId,\r\n  getMedicineById,\r\n  searchUsers\r\n} from '../datats/mockPatients';\r\n\r\n// Define interfaces for the data we're working with\r\ninterface MedicationDetailDisplay {\r\n  name: string;\r\n  dosage: string;\r\n  frequency: string; // This will be derived from the dosage\r\n  duration: string;  // This will be derived from the quantity\r\n}\r\n\r\ninterface MedicationRecordDisplay {\r\n  id: string;\r\n  name: string;\r\n  patientId: string;\r\n  date: string;\r\n  doctor: string;\r\n  diagnosis: string;\r\n  medications: MedicationDetailDisplay[];\r\n}\r\n\r\ninterface MedicationHistoryProps {\r\n  onBack: () => void;\r\n}\r\n\r\nexport function MedicationHistory({ onBack }: MedicationHistoryProps) {\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [medicationRecords, setMedicationRecords] = useState<MedicationRecordDisplay[]>([]);\r\n  \r\n  // Load medication data from mock database\r\n  useEffect(() => {\r\n    // Get all prescriptions\r\n    const prescriptions = getAllPrescriptions();\r\n    \r\n    // Transform prescriptions to the format we need for display\r\n    const records: MedicationRecordDisplay[] = prescriptions.map(prescription => {\r\n      // Get patient info\r\n      const patient = getUserById(prescription.patientId);\r\n      \r\n      // Get doctor info\r\n      const doctor = getUserById(prescription.doctorId);\r\n      \r\n      // Get prescription details\r\n      const prescriptionDetails = getPrescriptionDetailsByPrescriptionId(prescription._id);\r\n      \r\n      // Transform prescription details to medication details\r\n      const medications: MedicationDetailDisplay[] = prescriptionDetails.map(detail => {\r\n        const medicine = getMedicineById(detail.medicineId);\r\n        \r\n        // Parse dosage to extract frequency and duration\r\n        // In a real app, these would be separate fields\r\n        const dosageInfo = detail.dosage.split(' ');\r\n        const frequency = dosageInfo.slice(0, dosageInfo.length > 3 ? 3 : dosageInfo.length).join(' ');\r\n        const duration = `${detail.quantity / parseInt(dosageInfo[0])} ngày`;\r\n        \r\n        return {\r\n          name: medicine ? medicine.name : 'Unknown Medicine',\r\n          dosage: medicine ? `${medicine.name.split(' ')[1]}` : 'Unknown Dosage',\r\n          frequency: frequency,\r\n          duration: duration\r\n        };\r\n      });\r\n      \r\n      // Format date for display\r\n      const dateObj = new Date(prescription.date);\r\n      const formattedDate = `${dateObj.getDate().toString().padStart(2, '0')}/${(dateObj.getMonth() + 1).toString().padStart(2, '0')}/${dateObj.getFullYear()}`;\r\n      \r\n      return {\r\n        id: prescription._id,\r\n        name: patient ? patient.fullName : 'Unknown Patient',\r\n        patientId: patient ? patient.userId : 'Unknown',\r\n        date: formattedDate,\r\n        doctor: doctor ? doctor.fullName : 'Unknown Doctor',\r\n        diagnosis: prescription.diagnosis,\r\n        medications: medications\r\n      };\r\n    });\r\n    \r\n    setMedicationRecords(records);\r\n  }, []);\r\n  \r\n  // Filter medications based on search term and date range\r\n  const filteredMedications = medicationRecords.filter(record => {\r\n    // Filter by search term\r\n    const matchesSearch = \r\n      record.name.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n      record.patientId.toLowerCase().includes(searchTerm.toLowerCase());\r\n    \r\n    // Filter by date range if applicable\r\n    let matchesDateRange = true;\r\n    if (startDate && endDate) {\r\n      const recordDate = new Date(record.date.split('/').reverse().join('-'));\r\n      const start = new Date(startDate);\r\n      const end = new Date(endDate);\r\n      matchesDateRange = recordDate >= start && recordDate <= end;\r\n    }\r\n    \r\n    return matchesSearch && matchesDateRange;\r\n  });\r\n  \r\n  return (\r\n    <div className=\"max-w-7xl mx-auto\">\r\n      <div className=\"flex items-center mb-4\">\r\n        <button \r\n          onClick={onBack}\r\n          className=\"px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-md flex items-center text-gray-700\"\r\n        >\r\n          ← Quay lại\r\n        </button>\r\n      </div>\r\n      {/* Header section */}\r\n      <div className=\"mb-8 border-b border-gray-200 pb-5\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 tracking-tight\">Lịch sử thuốc</h1>\r\n        <p className=\"text-gray-600 mt-2\">Xem lịch sử thuốc đã kê cho bệnh nhân</p>\r\n      </div>\r\n      \r\n      {/* Main content container */}\r\n      <div className=\"border border-gray-300 rounded-xl shadow-sm overflow-hidden bg-white\">\r\n        {/* Search and date pickers */}\r\n        <div className=\"p-6 border-b border-gray-300 bg-white\">\r\n          <div className=\"flex flex-col md:flex-row md:items-end md:justify-between gap-4\">\r\n            <div className=\"relative flex-1\">\r\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                <SearchIcon size={18} className=\"text-black\" />\r\n              </div>\r\n              <input \r\n                type=\"text\" \r\n                placeholder=\"Tìm theo TÊN hoặc ID...\" \r\n                className=\"pl-10 pr-4 py-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-black focus:border-black shadow-sm transition-all text-black placeholder-gray-500\" \r\n                value={searchTerm} \r\n                onChange={e => setSearchTerm(e.target.value)} \r\n              />\r\n            </div>\r\n            \r\n            <div className=\"flex flex-col md:flex-row gap-3\">\r\n              <div className=\"flex flex-col\">\r\n                <label htmlFor=\"start-date\" className=\"block text-sm font-medium text-black mb-1 pl-1\">Từ ngày</label>\r\n                <div className=\"relative\">\r\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                    <CalendarIcon size={16} className=\"text-black\" />\r\n                  </div>\r\n                  <input\r\n                    id=\"start-date\"\r\n                    type=\"date\"\r\n                    className=\"pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-black shadow-sm transition-all text-black\"\r\n                    value={startDate}\r\n                    onChange={e => setStartDate(e.target.value)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex flex-col\">\r\n                <label htmlFor=\"end-date\" className=\"block text-sm font-medium text-black mb-1 pl-1\">Đến ngày</label>\r\n                <div className=\"relative\">\r\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                    <CalendarIcon size={16} className=\"text-black\" />\r\n                  </div>\r\n                  <input\r\n                    id=\"end-date\"\r\n                    type=\"date\"\r\n                    className=\"pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-black shadow-sm transition-all text-black\"\r\n                    value={endDate}\r\n                    onChange={e => setEndDate(e.target.value)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Records content */}\r\n        <div className=\"p-6\">\r\n          {filteredMedications.length > 0 ? (\r\n            <div className=\"space-y-6\">\r\n              {filteredMedications.map(record => (\r\n                <div key={record.id} className=\"border border-gray-300 rounded-lg overflow-hidden shadow-sm transition-all hover:shadow-md\">\r\n                  <div className=\"border-b border-gray-300 bg-gradient-to-r from-gray-50 to-white p-5 flex flex-col md:flex-row md:justify-between md:items-center gap-3\">\r\n                    <div>\r\n                      <h3 className=\"font-semibold text-lg text-gray-900\">\r\n                        {record.name}\r\n                      </h3>\r\n                      <p className=\"text-sm text-gray-700 mt-0.5\">\r\n                        ID: {record.patientId}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"flex flex-wrap gap-6\">\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-600 uppercase tracking-wide font-medium\">Ngày khám</p>\r\n                        <p className=\"text-sm font-medium text-gray-800 mt-1\">{record.date}</p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-600 uppercase tracking-wide font-medium\">Bác sĩ</p>\r\n                        <p className=\"text-sm font-medium text-gray-800 mt-1\">{record.doctor}</p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-600 uppercase tracking-wide font-medium\">Chẩn đoán</p>\r\n                        <p className=\"text-sm font-medium text-gray-800 mt-1\">{record.diagnosis}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"p-5\">\r\n                    <h4 className=\"font-medium text-gray-900 mb-4 flex items-center\">\r\n                      <PillIcon size={18} className=\"mr-2 text-indigo-600\" />\r\n                      Danh sách thuốc\r\n                    </h4>\r\n                    <div className=\"overflow-x-auto rounded-lg border border-gray-300\">\r\n                      <table className=\"min-w-full divide-y divide-gray-300\">\r\n                        <thead className=\"bg-gray-50\">\r\n                          <tr>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b\">\r\n                              Tên thuốc\r\n                            </th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b\">\r\n                              Liều lượng\r\n                            </th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b\">\r\n                              Tần suất\r\n                            </th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b\">\r\n                              Thời gian dùng\r\n                            </th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody className=\"bg-white divide-y divide-gray-300\">\r\n                          {record.medications.map((med, index) => (\r\n                            <tr key={index} className=\"hover:bg-gray-50 transition-colors\">\r\n                              <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                                {med.name}\r\n                              </td>\r\n                              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-700\">\r\n                                {med.dosage}\r\n                              </td>\r\n                              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-700\">\r\n                                {med.frequency}\r\n                              </td>\r\n                              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-700\">\r\n                                {med.duration}\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-16 border border-dashed border-gray-300 rounded-lg\">\r\n              <PillIcon size={48} className=\"mx-auto text-gray-400 mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-gray-700\">\r\n                Không tìm thấy dữ liệu\r\n              </h3>\r\n              <p className=\"text-gray-500 mt-2 max-w-md mx-auto\">\r\n                Thử tìm kiếm với từ khóa khác hoặc thay đổi bộ lọc để xem kết quả\r\n              </p>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Pagination */}\r\n          <div className=\"mt-8 flex justify-between items-center border-t border-gray-200 pt-5\">\r\n            <p className=\"text-sm text-black\">\r\n              Hiển thị <span className=\"font-medium\">{filteredMedications.length}</span> kết quả\r\n            </p>\r\n            <div className=\"inline-flex shadow-sm rounded-md\">\r\n              <button className=\"px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-black rounded-l-md hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-black focus:border-black transition-colors\">\r\n                Trước\r\n              </button>\r\n              <button className=\"px-4 py-2 bg-gray-200 text-black text-sm font-medium border border-gray-300 relative -ml-px hover:bg-gray-300 focus:z-10 focus:outline-none focus:ring-1 focus:ring-black focus:border-black transition-colors\">\r\n                1\r\n              </button>\r\n              <button className=\"px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-black rounded-r-md hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-black focus:border-black transition-colors\">\r\n                Sau\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4284, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/receptionistPage/components/Appointments/AppointmentForm.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { XIcon, UserIcon, SearchIcon } from 'lucide-react';\r\nimport { User, searchUsers, mockPatients, addQueue } from '../../../datats/mockPatients';\r\n\r\ninterface AppointmentFormProps {\r\n  onClose: () => void;\r\n}\r\n\r\nexport function AppointmentForm({\r\n  onClose\r\n}: AppointmentFormProps) {\r\n  const [formData, setFormData] = useState({\r\n    patientId: '', // Lưu trữ ID của bệnh nhân\r\n    status: 'waiting' // Mặc định là waiting\r\n  });\r\n  \r\n  const [selectedPatient, setSelectedPatient] = useState<User | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [searchResults, setSearchResults] = useState<User[]>([]);\r\n  // Sử dụng danh sách bệnh nhân từ mockPatients.ts\r\n  const patients = mockPatients;\r\n\r\n  // Xử lý tìm kiếm bệnh nhân\r\n  useEffect(() => {\r\n    if (searchTerm.length > 0) {\r\n      // Sử dụng hàm searchUsers từ mockPatients.ts và lọc chỉ lấy các user có role='PATIENT'\r\n      const results = searchUsers(searchTerm).filter(user => user.role === 'PATIENT');\r\n      setSearchResults(results);\r\n    } else {\r\n      setSearchResults([]);\r\n    }\r\n  }, [searchTerm]);\r\n\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchTerm(e.target.value);\r\n  };\r\n\r\n  const selectPatient = (patient: User) => {\r\n    setSelectedPatient(patient);\r\n    setFormData({\r\n      ...formData,\r\n      patientId: patient._id\r\n    });\r\n    setSearchTerm('');\r\n    setSearchResults([]);\r\n  };\r\n\r\n  const handleStatusChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    setFormData({\r\n      ...formData,\r\n      status: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!selectedPatient) {\r\n      alert('Vui lòng chọn bệnh nhân');\r\n      return;\r\n    }\r\n\r\n    // Sử dụng hàm addQueue từ mockPatients.ts để thêm bệnh nhân vào queue\r\n    const status = formData.status as 'waiting' | 'in_progress' | 'completed' | 'canceled';\r\n    const newQueue = addQueue(formData.patientId, status);\r\n    \r\n    if (newQueue) {\r\n      console.log('Patient added to queue:', newQueue);\r\n      alert(`Đã thêm bệnh nhân ${selectedPatient.fullName} vào hàng chờ!`);\r\n      onClose();\r\n    } else {\r\n      alert('Không thể thêm bệnh nhân vào hàng chờ. Bệnh nhân có thể đã tồn tại trong hàng chờ.');\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow\">\r\n      <div className=\"flex justify-between items-center border-b p-4\">\r\n        <h2 className=\"text-xl font-semibold text-gray-800\">Đặt lịch khám</h2>\r\n        <div className=\"flex items-center\">\r\n          <span className=\"text-sm text-gray-500 mr-3\">ID và version sẽ được tạo tự động</span>\r\n          <button onClick={onClose} className=\"p-1 rounded-full hover:bg-gray-200\">\r\n            <XIcon size={20} className=\"text-gray-500\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      <form onSubmit={handleSubmit} className=\"p-6\">\r\n        {/* Tìm kiếm bệnh nhân */}\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n            Tìm bệnh nhân (patient) <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          \r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n              <SearchIcon size={18} className=\"text-gray-400\" />\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Tìm theo tên, CCCD hoặc số điện thoại...\"\r\n              className=\"pl-10 pr-4 py-2 border border-gray-300 rounded-md w-full text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              value={searchTerm}\r\n              onChange={handleSearchChange}\r\n            />\r\n          </div>\r\n          \r\n          {searchResults.length > 0 && (\r\n            <div className=\"mt-2 border border-gray-200 rounded-md max-h-60 overflow-y-auto bg-white shadow-md\">\r\n              {searchResults.map((patient) => (\r\n                <div\r\n                  key={patient._id}\r\n                  className=\"p-3 border-b border-gray-100 hover:bg-blue-50 cursor-pointer flex items-center\"\r\n                  onClick={() => selectPatient(patient)}\r\n                >\r\n                  <UserIcon size={20} className=\"text-gray-500 mr-2\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-800\">{patient.fullName}</p>\r\n                    <div className=\"text-sm text-gray-500\">\r\n                      ID: {patient.userId} | SĐT: {patient.phone}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n          \r\n          {/* Hiển thị bệnh nhân đã chọn */}\r\n          {selectedPatient && (\r\n            <div className=\"mt-4 p-3 border border-blue-200 rounded-md bg-blue-50\">\r\n              <div className=\"flex justify-between\">\r\n                <div className=\"flex items-center\">\r\n                  <UserIcon size={20} className=\"text-blue-500 mr-2\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-800\">{selectedPatient.fullName}</p>\r\n                    <div className=\"text-sm text-gray-600\">\r\n                      ID: {selectedPatient.userId} | SĐT: {selectedPatient.phone}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setSelectedPatient(null);\r\n                    setFormData({...formData, patientId: ''});\r\n                  }}\r\n                  className=\"text-gray-500 hover:text-red-500\"\r\n                >\r\n                  <XIcon size={18} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        {/* Trạng thái */}\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-sm font-semibold text-gray-700 mb-2\" htmlFor=\"status\">\r\n            Trạng thái cuộc hẹn (status)\r\n          </label>\r\n          <select\r\n            id=\"status\"\r\n            name=\"status\"\r\n            className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            value={formData.status}\r\n            onChange={handleStatusChange}\r\n          >\r\n            <option value=\"waiting\">Đang chờ (waiting)</option>\r\n            <option value=\"in_progress\">Đang thực hiện (in_progress)</option>\r\n            <option value=\"completed\">Đã hoàn thành (completed)</option>\r\n            <option value=\"canceled\">Đã hủy (canceled)</option>\r\n          </select>\r\n        </div>\r\n        \r\n        <div className=\"mt-8 flex justify-end space-x-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            className=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50\"\r\n          >\r\n            Hủy bỏ\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n            disabled={!selectedPatient}\r\n          >\r\n            Đặt lịch\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4722, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/receptionistPage/AppointmentBooking.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { CalendarIcon, SearchIcon, CheckCircleIcon, XIcon } from 'lucide-react';\r\nimport { AppointmentForm } from './components/Appointments/AppointmentForm';\r\nimport { \r\n  getAllPatients, \r\n  getQueuesByStatus, \r\n  addQueue, \r\n  User \r\n} from '../datats/mockPatients';\r\n\r\ninterface AppointmentBookingProps {\r\n  onBack: () => void;\r\n}\r\n\r\n// Interface for our appointment data structure\r\ninterface Appointment {\r\n  id: string;\r\n  name: string;\r\n  userId: string;\r\n  phone: string;\r\n  appointmentDate: string;\r\n  appointmentTime: string;\r\n  status: 'pending' | 'confirmed' | 'completed' | 'canceled';\r\n}\r\n\r\nexport function AppointmentBooking({ onBack }: AppointmentBookingProps) {\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\r\n\r\n  // Load mock patient data and generate appointments\r\n  useEffect(() => {\r\n    // Get all patients\r\n    const patients = getAllPatients();\r\n    \r\n    // Generate mock appointments using patient data\r\n    const today = new Date();\r\n    const mockAppointments = patients.slice(0, 5).map((patient, index) => {\r\n      const appointmentHour = 9 + index;\r\n      const appointmentDate = new Date();\r\n      appointmentDate.setDate(today.getDate() + (index % 3)); // Distribute over next 3 days\r\n      \r\n      return {\r\n        id: patient._id,\r\n        name: patient.fullName,\r\n        userId: patient.userId,\r\n        phone: patient.phone,\r\n        appointmentDate: appointmentDate.toISOString().split('T')[0],\r\n        appointmentTime: `${appointmentHour < 10 ? '0' + appointmentHour : appointmentHour}:00`,\r\n        status: (index % 2 === 0) ? 'pending' : 'confirmed'\r\n      } as Appointment;\r\n    });\r\n    \r\n    setAppointments(mockAppointments);\r\n  }, []);\r\n  \r\n  const filteredAppointments = appointments.filter(appointment => \r\n    appointment.name.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n    appointment.userId.includes(searchTerm) ||\r\n    appointment.phone.includes(searchTerm)\r\n  );\r\n  \r\n  const handleMoveToQueue = (appointmentId: string) => {\r\n    // Add patient to queue using the addQueue function from mockPatients.ts\r\n    const result = addQueue(appointmentId, 'waiting');\r\n    \r\n    if (result) {\r\n      // Update appointment status\r\n      setAppointments(appointments.map(appt => \r\n        appt.id === appointmentId ? {...appt, status: 'completed' as const} : appt\r\n      ));\r\n      \r\n      alert('Đã chuyển bệnh nhân vào phòng chờ!');\r\n    } else {\r\n      alert('Bệnh nhân đã có trong phòng chờ hoặc không thể thêm!');\r\n    }\r\n  };\r\n  \r\n  return <div>\r\n      <div className=\"flex items-center mb-4\">\r\n        <button \r\n          onClick={onBack}\r\n          className=\"mr-4 px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-md flex items-center text-gray-700\"\r\n        >\r\n          ← Quay lại\r\n        </button>\r\n      </div>\r\n      <div className=\"mb-8 border-b border-gray-200 pb-5\">\r\n        <h1 className=\"text-3xl font-bold text-black tracking-tight\">Đặt lịch khám</h1>\r\n        <p className=\"text-black mt-2\">\r\n          Quản lý các cuộc hẹn khám bệnh và điều phối lịch\r\n        </p>\r\n      </div>\r\n      \r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n        <div className=\"lg:col-span-2\">\r\n          <div className=\"bg-white rounded-xl shadow border border-gray-200 overflow-hidden\">\r\n            <div className=\"flex justify-between items-center p-6 border-b border-gray-200\">\r\n              <h2 className=\"text-xl font-semibold text-black\">Lịch hẹn</h2>\r\n              <button \r\n                onClick={() => setShowForm(true)}\r\n                className=\"bg-blue-600 hover:bg-blue-700 text-white rounded-lg px-4 py-2 flex items-center text-sm font-medium transition-colors\"\r\n              >\r\n                <CalendarIcon className=\"w-4 h-4 mr-2\" />\r\n                Thêm lịch hẹn\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"p-6 border-b border-gray-200\">\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <SearchIcon size={18} className=\"text-black\" />\r\n                </div>\r\n                <input \r\n                  type=\"text\" \r\n                  placeholder=\"Tìm kiếm theo tên, ID hoặc số điện thoại...\" \r\n                  className=\"pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-black focus:border-black shadow-sm\" \r\n                  value={searchTerm}\r\n                  onChange={e => setSearchTerm(e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Bệnh nhân\r\n                    </th>\r\n                    <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Thời gian\r\n                    </th>\r\n                    <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Trạng thái\r\n                    </th>\r\n                    <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Thao tác\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {filteredAppointments.length > 0 ? (\r\n                    filteredAppointments.map((appointment) => (\r\n                      <tr key={appointment.id} className=\"hover:bg-gray-50\">\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <div className=\"text-sm font-medium text-gray-900\">{appointment.name}</div>\r\n                          <div className=\"text-sm text-gray-500\">ID: {appointment.userId}</div>\r\n                          <div className=\"text-sm text-gray-500\">SĐT: {appointment.phone}</div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <div className=\"text-sm text-gray-900\">\r\n                            {new Date(appointment.appointmentDate).toLocaleDateString('vi-VN')}\r\n                          </div>\r\n                          <div className=\"text-sm text-gray-500\">{appointment.appointmentTime}</div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className={`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${\r\n                            appointment.status === 'confirmed' \r\n                              ? 'bg-green-100 text-green-800' \r\n                              : appointment.status === 'canceled'\r\n                              ? 'bg-red-100 text-red-800'\r\n                              : appointment.status === 'completed'\r\n                              ? 'bg-blue-100 text-blue-800'\r\n                              : 'bg-yellow-100 text-yellow-800'\r\n                          }`}>\r\n                            {appointment.status === 'confirmed' \r\n                              ? 'Đã xác nhận' \r\n                              : appointment.status === 'canceled'\r\n                              ? 'Đã hủy'\r\n                              : appointment.status === 'completed'\r\n                              ? 'Đã hoàn thành'\r\n                              : 'Đang chờ'}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                          {appointment.status !== 'completed' && appointment.status !== 'canceled' && (\r\n                            <button \r\n                              onClick={() => handleMoveToQueue(appointment.id)}\r\n                              className=\"text-white bg-blue-600 hover:bg-blue-700 px-3 py-1.5 rounded-md mr-2 flex items-center\"\r\n                            >\r\n                              <CheckCircleIcon className=\"w-4 h-4 mr-1\" />\r\n                              Chuyển vào phòng chờ\r\n                            </button>\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  ) : (\r\n                    <tr>\r\n                      <td colSpan={4} className=\"px-6 py-10 text-center text-sm text-gray-500\">\r\n                        Không tìm thấy lịch hẹn nào\r\n                      </td>\r\n                    </tr>\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            \r\n            <div className=\"p-4 bg-gray-50 border-t border-gray-200\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"text-sm text-gray-700\">\r\n                  Hiển thị {filteredAppointments.length} trong tổng số {appointments.length} lịch hẹn\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div>\r\n          <div className=\"bg-white rounded-xl shadow border border-gray-200 overflow-hidden\">\r\n            <div className=\"p-6 border-b border-gray-200\">\r\n              <h2 className=\"text-xl font-semibold text-black\">Lịch hẹn hôm nay</h2>\r\n              <p className=\"mt-1 text-sm text-gray-500\">\r\n                {new Date().toLocaleDateString('vi-VN', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}\r\n              </p>\r\n            </div>\r\n            <div className=\"p-6\">\r\n              {appointments.filter(a => a.appointmentDate === new Date().toISOString().split('T')[0]).length > 0 ? (\r\n                <ul className=\"divide-y divide-gray-200\">\r\n                  {appointments\r\n                    .filter(a => a.appointmentDate === new Date().toISOString().split('T')[0])\r\n                    .map(appointment => (\r\n                      <li key={appointment.id} className=\"py-4\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div>\r\n                            <p className=\"text-sm font-medium text-black\">{appointment.appointmentTime}</p>\r\n                            <p className=\"text-sm text-gray-600 mt-1\">{appointment.name}</p>\r\n                          </div>\r\n                          <span className={`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${\r\n                            appointment.status === 'confirmed' \r\n                              ? 'bg-green-100 text-green-800' \r\n                              : appointment.status === 'canceled'\r\n                              ? 'bg-red-100 text-red-800'\r\n                              : appointment.status === 'completed'\r\n                              ? 'bg-blue-100 text-blue-800'\r\n                              : 'bg-yellow-100 text-yellow-800'\r\n                          }`}>\r\n                            {appointment.status === 'confirmed' \r\n                              ? 'Đã xác nhận' \r\n                              : appointment.status === 'canceled'\r\n                              ? 'Đã hủy'\r\n                              : appointment.status === 'completed'\r\n                              ? 'Đã hoàn thành'\r\n                              : 'Đang chờ'}\r\n                          </span>\r\n                        </div>\r\n                      </li>\r\n                    ))\r\n                  }\r\n                </ul>\r\n              ) : (\r\n                <div className=\"text-center py-8\">\r\n                  <CalendarIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n                  <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Không có lịch hẹn hôm nay</h3>\r\n                  <p className=\"mt-1 text-sm text-gray-500\">\r\n                    Chưa có lịch hẹn nào được đặt cho hôm nay.\r\n                  </p>\r\n                  <div className=\"mt-6\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowForm(true)}\r\n                      className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n                    >\r\n                      <CalendarIcon className=\"-ml-1 mr-2 h-5 w-5\" aria-hidden=\"true\" />\r\n                      Thêm lịch hẹn\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Appointment Form Modal */}\r\n      {showForm && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n            <AppointmentForm onClose={() => setShowForm(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>;\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;;;;AAsBO,SAAS,mBAAmB,EAAE,MAAM,EAA2B;IACpE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB,EAAE;IAElE,mDAAmD;IACnD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,mBAAmB;QACnB,MAAM,WAAW,CAAA,GAAA,oIAAA,CAAA,iBAAc,AAAD;QAE9B,gDAAgD;QAChD,MAAM,QAAQ,IAAI;QAClB,MAAM,mBAAmB,SAAS,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,SAAS;YAC1D,MAAM,kBAAkB,IAAI;YAC5B,MAAM,kBAAkB,IAAI;YAC5B,gBAAgB,OAAO,CAAC,MAAM,OAAO,KAAM,QAAQ,IAAK,8BAA8B;YAEtF,OAAO;gBACL,IAAI,QAAQ,GAAG;gBACf,MAAM,QAAQ,QAAQ;gBACtB,QAAQ,QAAQ,MAAM;gBACtB,OAAO,QAAQ,KAAK;gBACpB,iBAAiB,gBAAgB,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;gBAC5D,iBAAiB,GAAG,kBAAkB,KAAK,MAAM,kBAAkB,gBAAgB,GAAG,CAAC;gBACvF,QAAQ,AAAC,QAAQ,MAAM,IAAK,YAAY;YAC1C;QACF;QAEA,gBAAgB;IAClB,GAAG,EAAE;IAEL,MAAM,uBAAuB,aAAa,MAAM,CAAC,CAAA,cAC/C,YAAY,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW,OAC9D,YAAY,MAAM,CAAC,QAAQ,CAAC,eAC5B,YAAY,KAAK,CAAC,QAAQ,CAAC;IAG7B,MAAM,oBAAoB,CAAC;QACzB,wEAAwE;QACxE,MAAM,SAAS,CAAA,GAAA,oIAAA,CAAA,WAAQ,AAAD,EAAE,eAAe;QAEvC,IAAI,QAAQ;YACV,4BAA4B;YAC5B,gBAAgB,aAAa,GAAG,CAAC,CAAA,OAC/B,KAAK,EAAE,KAAK,gBAAgB;oBAAC,GAAG,IAAI;oBAAE,QAAQ;gBAAoB,IAAI;YAGxE,MAAM;QACR,OAAO;YACL,MAAM;QACR;IACF;IAEA,qBAAO,8OAAC;;0BACJ,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,SAAS;oBACT,WAAU;8BACX;;;;;;;;;;;0BAIH,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA+C;;;;;;kCAC7D,8OAAC;wBAAE,WAAU;kCAAkB;;;;;;;;;;;;0BAKjC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAG,WAAU;sDAAmC;;;;;;sDACjD,8OAAC;4CACC,SAAS,IAAM,YAAY;4CAC3B,WAAU;;8DAEV,8OAAC,8MAAA,CAAA,eAAY;oDAAC,WAAU;;;;;;gDAAiB;;;;;;;;;;;;;8CAK7C,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC,0MAAA,CAAA,aAAU;oDAAC,MAAM;oDAAI,WAAU;;;;;;;;;;;0DAElC,8OAAC;gDACC,MAAK;gDACL,aAAY;gDACZ,WAAU;gDACV,OAAO;gDACP,UAAU,CAAA,IAAK,cAAc,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;8CAKjD,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAM,WAAU;;0DACf,8OAAC;gDAAM,WAAU;0DACf,cAAA,8OAAC;;sEACC,8OAAC;4DAAG,OAAM;4DAAM,WAAU;sEAAiF;;;;;;sEAG3G,8OAAC;4DAAG,OAAM;4DAAM,WAAU;sEAAiF;;;;;;sEAG3G,8OAAC;4DAAG,OAAM;4DAAM,WAAU;sEAAiF;;;;;;sEAG3G,8OAAC;4DAAG,OAAM;4DAAM,WAAU;sEAAiF;;;;;;;;;;;;;;;;;0DAK/G,8OAAC;gDAAM,WAAU;0DACd,qBAAqB,MAAM,GAAG,IAC7B,qBAAqB,GAAG,CAAC,CAAC,4BACxB,8OAAC;wDAAwB,WAAU;;0EACjC,8OAAC;gEAAG,WAAU;;kFACZ,8OAAC;wEAAI,WAAU;kFAAqC,YAAY,IAAI;;;;;;kFACpE,8OAAC;wEAAI,WAAU;;4EAAwB;4EAAK,YAAY,MAAM;;;;;;;kFAC9D,8OAAC;wEAAI,WAAU;;4EAAwB;4EAAM,YAAY,KAAK;;;;;;;;;;;;;0EAEhE,8OAAC;gEAAG,WAAU;;kFACZ,8OAAC;wEAAI,WAAU;kFACZ,IAAI,KAAK,YAAY,eAAe,EAAE,kBAAkB,CAAC;;;;;;kFAE5D,8OAAC;wEAAI,WAAU;kFAAyB,YAAY,eAAe;;;;;;;;;;;;0EAErE,8OAAC;gEAAG,WAAU;0EACZ,cAAA,8OAAC;oEAAK,WAAW,CAAC,mEAAmE,EACnF,YAAY,MAAM,KAAK,cACnB,gCACA,YAAY,MAAM,KAAK,aACvB,4BACA,YAAY,MAAM,KAAK,cACvB,8BACA,iCACJ;8EACC,YAAY,MAAM,KAAK,cACpB,gBACA,YAAY,MAAM,KAAK,aACvB,WACA,YAAY,MAAM,KAAK,cACvB,kBACA;;;;;;;;;;;0EAGR,8OAAC;gEAAG,WAAU;0EACX,YAAY,MAAM,KAAK,eAAe,YAAY,MAAM,KAAK,4BAC5D,8OAAC;oEACC,SAAS,IAAM,kBAAkB,YAAY,EAAE;oEAC/C,WAAU;;sFAEV,8OAAC,+NAAA,CAAA,kBAAe;4EAAC,WAAU;;;;;;wEAAiB;;;;;;;;;;;;;uDArC3C,YAAY,EAAE;;;;8EA6CzB,8OAAC;8DACC,cAAA,8OAAC;wDAAG,SAAS;wDAAG,WAAU;kEAA+C;;;;;;;;;;;;;;;;;;;;;;;;;;;8CASnF,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC;4CAAI,WAAU;;gDAAwB;gDAC3B,qBAAqB,MAAM;gDAAC;gDAAgB,aAAa,MAAM;gDAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAOpF,8OAAC;kCACC,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAG,WAAU;sDAAmC;;;;;;sDACjD,8OAAC;4CAAE,WAAU;sDACV,IAAI,OAAO,kBAAkB,CAAC,SAAS;gDAAE,SAAS;gDAAQ,MAAM;gDAAW,OAAO;gDAAQ,KAAK;4CAAU;;;;;;;;;;;;8CAG9G,8OAAC;oCAAI,WAAU;8CACZ,aAAa,MAAM,CAAC,CAAA,IAAK,EAAE,eAAe,KAAK,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,GAAG,kBAC/F,8OAAC;wCAAG,WAAU;kDACX,aACE,MAAM,CAAC,CAAA,IAAK,EAAE,eAAe,KAAK,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,EACxE,GAAG,CAAC,CAAA,4BACH,8OAAC;gDAAwB,WAAU;0DACjC,cAAA,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;;8EACC,8OAAC;oEAAE,WAAU;8EAAkC,YAAY,eAAe;;;;;;8EAC1E,8OAAC;oEAAE,WAAU;8EAA8B,YAAY,IAAI;;;;;;;;;;;;sEAE7D,8OAAC;4DAAK,WAAW,CAAC,mEAAmE,EACnF,YAAY,MAAM,KAAK,cACnB,gCACA,YAAY,MAAM,KAAK,aACvB,4BACA,YAAY,MAAM,KAAK,cACvB,8BACA,iCACJ;sEACC,YAAY,MAAM,KAAK,cACpB,gBACA,YAAY,MAAM,KAAK,aACvB,WACA,YAAY,MAAM,KAAK,cACvB,kBACA;;;;;;;;;;;;+CArBD,YAAY,EAAE;;;;;;;;;6DA6B7B,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,8MAAA,CAAA,eAAY;gDAAC,WAAU;;;;;;0DACxB,8OAAC;gDAAG,WAAU;0DAAyC;;;;;;0DACvD,8OAAC;gDAAE,WAAU;0DAA6B;;;;;;0DAG1C,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;oDACC,MAAK;oDACL,SAAS,IAAM,YAAY;oDAC3B,WAAU;;sEAEV,8OAAC,8MAAA,CAAA,eAAY;4DAAC,WAAU;4DAAqB,eAAY;;;;;;wDAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAYjF,0BACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,gLAAA,CAAA,kBAAe;wBAAC,SAAS,IAAM,YAAY;;;;;;;;;;;;;;;;;;;;;;AAKxD","debugId":null}},
    {"offset": {"line": 5351, "column": 0}, "map": {"version":3,"sources":["file:///D:/Codes/Projects/hospitalityWeb/hospitality-website/my-app/src/app/receptionistPage/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Dashboard } from './Dashboard';\r\nimport { PatientManagement } from './PatientManagement';\r\nimport { QueueManagement } from './QueueManagement';\r\nimport { MedicationHistory } from './MedicationHistory';\r\nimport { AppointmentBooking } from './AppointmentBooking';\r\n\r\nexport default function ReceptionistPage() {\r\n  const { user, isAuthenticated, logout } = useAuth();\r\n  const router = useRouter();\r\n  const [currentView, setCurrentView] = useState('Dashboard');\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      router.push('/login');\r\n    } else if (user?.role !== 'RECEPTIONIST') {\r\n      logout();\r\n      router.push('/login');\r\n    }\r\n  }, [isAuthenticated, router, user, logout]);\r\n\r\n  if (!isAuthenticated || !user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const renderCurrentView = () => {\r\n    switch(currentView) {\r\n      case 'PatientManagement':\r\n        return <PatientManagement onBack={() => setCurrentView('Dashboard')} />;\r\n      case 'QueueManagement':\r\n        return <QueueManagement onBack={() => setCurrentView('Dashboard')} />;\r\n      case 'MedicationHistory':\r\n        return <MedicationHistory onBack={() => setCurrentView('Dashboard')} />;\r\n      case 'AppointmentBooking':  // Thêm case này để xử lý AppointmentBooking\r\n        return <AppointmentBooking onBack={() => setCurrentView('Dashboard')} />;\r\n      case 'Dashboard':\r\n      default:\r\n        return <Dashboard onNavigate={(view) => setCurrentView(view)} />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col w-full min-h-screen bg-gray-50\">\r\n      {renderCurrentView()}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;;AAWe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,eAAe,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,qIAAA,CAAA,UAAO,AAAD;IAChD,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,iBAAiB;YACpB,OAAO,IAAI,CAAC;QACd,OAAO,IAAI,MAAM,SAAS,gBAAgB;YACxC;YACA,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAiB;QAAQ;QAAM;KAAO;IAE1C,IAAI,CAAC,mBAAmB,CAAC,MAAM;QAC7B,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,MAAM,oBAAoB;QACxB,OAAO;YACL,KAAK;gBACH,qBAAO,8OAAC,oJAAA,CAAA,oBAAiB;oBAAC,QAAQ,IAAM,eAAe;;;;;;YACzD,KAAK;gBACH,qBAAO,8OAAC,kJAAA,CAAA,kBAAe;oBAAC,QAAQ,IAAM,eAAe;;;;;;YACvD,KAAK;gBACH,qBAAO,8OAAC,oJAAA,CAAA,oBAAiB;oBAAC,QAAQ,IAAM,eAAe;;;;;;YACzD,KAAK;gBACH,qBAAO,8OAAC,qJAAA,CAAA,qBAAkB;oBAAC,QAAQ,IAAM,eAAe;;;;;;YAC1D,KAAK;YACL;gBACE,qBAAO,8OAAC,4IAAA,CAAA,YAAS;oBAAC,YAAY,CAAC,OAAS,eAAe;;;;;;QAC3D;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACZ;;;;;;AAGP","debugId":null}}]
}